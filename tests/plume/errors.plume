/// Test set unknow variable
set x = Wings
/// Error
Compilation error: Cannot set variable 'x', it isn't defined in the current scope.
File 'set unknow variable', line 1: set x = Wings
                                    ^^^^^^^^^^^^^
/// End

/// Test use unknow variable
let x = $y
/// Error
Compilation error: Cannot use variable 'y', it isn't defined in the current scope.
File 'use unknow variable', line 1: let x = $y
                                             ^
/// End

/// Test set constant variable
let const x = Wings
set x = Nib
/// Error
Compilation error: Cannot set variable 'x', it is a constant.
File 'set constant variable', line 2: set x = Nib
                                      ^^^^^^^^^^^
/// End

/// Test let empty const
let const x
/// Error
Compilation error: Cannot define an empty constant variable.
File 'let empty const', line 1: let const x
                                ^^^^^^^^^^^
/// End

/// Test define twice
let x = Wings
let x = Nib
/// Error
Compilation error: Cannot define variable 'x', it already exists in the current scope.
File 'define twice', line 2: let x = Nib
                             ^^^^^^^^^^^
/// End

/// Test define macro twice
macro wings()
end
macro wings()
end
/// Error
Compilation error: Cannot define static variable 'wings', it already exists in the current file scope.
File 'define macro twice', line 3: macro wings()
                                   ^^^^^^^^^^^^^
/// End

/// Test Add string
let x = Wings
$(x+1)
/// Error
Runtime error: Cannot convert the string value to a number.

Traceback (most recent call first):
  File 'Add string', line 2: $(x+1)
                               ^^^
/// End

/// Test Add table
let x = $table()
$(x+1)
/// Error
Runtime error: Cannot do comparison or arithmetic with table value.

Traceback (most recent call first):
  File 'Add table', line 2: $(x+1)
                              ^^^
/// End

/// Test Iterate over non table
for x in 1
end
/// Error
Runtime error: Try to iterate over a non-table 'number' value.

Traceback (most recent call first):
  File 'Iterate over non table', line 1: for x in 1
                                         ^^^^^^^^^^
/// End

/// Test Empty key
let t = $table()
$t[empty]
/// Error
Runtime error: Cannot use empty as key.

Traceback (most recent call first):
  File 'Empty key', line 2: $t[empty]
                              ^^^^^^^
/// End

/// Test Invalid key (string)
let t = $table(wing: 5)
$t.nib
/// Error
Runtime error: Unregistered key 'nib'.

Traceback (most recent call first):
  File 'Invalid key (string)', line 2: $t.nib
                                         ^^^^
/// End

/// Test Invalid key (int)
let t = $table(nib, quill)
$t[3]
/// Error
Runtime error: Invalid index '3'.

Traceback (most recent call first):
  File 'Invalid key (int)', line 2: $t[3]
                                      ^^^
/// End

/// Test Index non-table
let t = 1
$t[3]
/// Error
Runtime error: Try to index a 'string' value.

Traceback (most recent call first):
  File 'Index non-table', line 2: $t[3]
                                    ^^^
/// End

/// Test Expand non-table
let t = 1
...t
/// Error
Runtime error: Try to expand a 'string' value.

Traceback (most recent call first):
  File 'Expand non-table', line 2: ...t
                                   ^^^^
/// End

/// Test Concat error 1
let wing = Quill
let nib = $table()

$wing $nib
/// Error
Runtime error: Cannot concat a 'table' value.

Traceback (most recent call first):
  File 'Concat error 1', line 4: $wing $nib
                                        ^^^
/// End

/// Test Concat error 2
let wing = Quill
let nib = $table()

$wing
if true
    $nib
end
/// Error
Runtime error: Cannot concat a 'table' value.

Traceback (most recent call first):
  File 'Concat error 2', line 6: $nib
                                  ^^^
/// End

/// Test MixedBlockError 1
- Wing
Nib
/// Error
Syntax error: Mixed block: the expected type of the block is TABLE, but it contains an element TEXT.
File 'MixedBlockError 1', line 2: Nib
                                  ^^^
/// End

/// Test MixedBlockError 2
Nib
- Wing
/// Error
Syntax error: Mixed block: the expected type of the block is VALUE, but it contains an element TABLE.
File 'MixedBlockError 2', line 2: - Wing
                                  ^^^^^^
/// End

/// Test MixedBlockError 3
Wing
for i in seq(1, 10)
    - Nib
end
/// Error
Syntax error: Mixed block: the expected type of the block is VALUE, but it contains an element TABLE.
File 'MixedBlockError 3', line 3: - Nib
                                  ^^^^^
/// End

/// Test MixedBlockError 4
Wing
if true
    - nib
end
/// Error
Syntax error: Mixed block: the expected type of the block is VALUE, but it contains an element TABLE.
File 'MixedBlockError 4', line 3: - nib
                                  ^^^^^
/// End

/// Test MixedBlockError 5
Wing
if true
    quill
else
    - nib
end
/// Error
Syntax error: Mixed block: the expected type of the block is TEXT, but it contains an element TABLE.
File 'MixedBlockError 5', line 5: - nib
                                  ^^^^^
/// End

/// Test MixedBlockError 6
Wing
if true
    quill
elseif true
    paint
else
    song
    - nib
end
/// Error
Syntax error: Mixed block: the expected type of the block is TEXT, but it contains an element TABLE.
File 'MixedBlockError 6', line 8: - nib
                                  ^^^^^
/// End

/// Test no MixedBlockError 1
let t = @table
    x: for i in seq(1, 10)
        - $i
    end
end
/// Output

/// End

/// Test no MixedBlockError 2
let t = @table
    x: for i in seq(1, 10)
        y: $i
    end
end
/// Output

/// End

/// Test callstack
macro paint()
end

macro sing()
    $paint(1)
end

macro wing()
    $sing()
end

$wing()
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'paint', 1 instead of 0.

Traceback (most recent call first):
  File 'callstack', line 5, in macro sing: $paint(1)
                                            ^^^^^^^^
  File 'callstack', line 9, in macro wing: $sing()
                                            ^^^^^^
  File 'callstack', line 12: $wing()
                              ^^^^^^
/// End