/// Test #105
let x = 1
for y in seq(1, 10)
    $(x+y)
end
/// Output
234567891011
/// End

/// Test #106
macro css(selector, ...style)
	for item in items(style)
	end
end

macro Document(body)
	@css(a)
		margin: 0
	end
end

@Document
	aaaaaaaaaaaaa
end
/// Output
/// End

/// Test #110
macro List(...items)
    let count = 0
    for item in items
        set count += 1
        $count)$item\n
    end
end

@List
    - mark
    - paint
    - sing
end
/// Output
1)mark
2)paint
3)sing
/// End

/// Test #112
let lib = $import(tests/plume/toimport/text)
macro Document()
end
/// Output
/// End

/// Test #123
macro wing(body)
    $body
end

$(wing("a"))
/// Output
a
/// End

/// Test #124
for i in seq(1, 2)
    for j in seq(1, 2)
        for k in seq(1, 2)
            $i
        end
    end
end
/// Output
11112222
/// End

/// Test #125
let nex = 0
for j in seq(1, 2)
    set nex += 1
end
$nex
/// Output
2
/// End

/// Test #126
macro Wing(body)
    $body
end

@Wing()
    let nex = 0
    for k in seq(1, 1)
        $nex
    end
end

/// Output
0
/// End

/// Test #138
macro wings()
end
macro wings()
end
/// Error
Compilation error: Cannot define static variable 'wings', it already exists in the current file scope.
File '#138', line 3: macro wings()
                     ^^^^^^^^^^^^^
/// End

/// Test #141
let const x = 5

$(x+a)
/// Error
Compilation error: Cannot use variable 'a', it isn't defined in the current scope.
File '#141', line 3: $(x+a)
                         ^
/// End

/// Test #143
for i in seq(1, 1.5)
    $i
end
/// Output
1
/// End

/// Test #144
let x = 1.5
for i in seq(1, x)
    $i
end
/// Output
1
/// End

/// Test #145
let t = $table(wing)
let index = 1

$t[index]
/// Output
wing
/// End

/// Test #146
let a = wing
let b = nib

let c = if true
    $a $b
end

$c
/// Output
wing nib
/// End

/// Test #147
let x = 1
for i in seq(x, 2)
    $i
end
/// Output
12
/// End

/// Test #148
let x = macro()
end

$x(1)
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'x', 1 instead of 0.

Traceback (most recent call first):
  File '#148', line 4: $x(1)
                        ^^^^
/// End

/// Test #162
let blank = $("")
/// Output

/// End

/// Test #166
let t = @table
    - @table
        wing: blue
    end
end

set t[1].wing = red
/// Output

/// End

/// Test #169
let t = $table()
let t2 = if false
    $t
else
    $t
end
/// Output

/// End


/// Test #174-1
let t = @table
  mark: song
  quill: macro(write)
    $write $self.mark
  end
end

@t.quill
    write
end
/// Output
write song
/// End

/// Test #174-2
let t = @table
  mark: song
  quill: macro()
     $self.mark
  end
end

$t.quill()
/// Output
song
/// End

/// Test #177
do nothing
/// Output

/// End

/// Test #181
macro wing(x)
end

$(wing(false))
/// Output

/// End

/// Test #187
macro Wing(?optn, ...s)
    if optn
       true 
    else
       false
    end
end
$Wing(?optn)\n
$Wing( ?optn)
/// Output
true
true
/// End

/// Test #189
let notwing = 1
$(notwing)
/// Output
1
/// End

/// Test #199
let trues = 1
/// Output
/// End

/// Test #214
macro quill(song: 0)
    let mark = $(5%5)
    $(mark==0)
end

$quill()
/// Output
true
/// End

/// Test #231
macro quill(?flag)
end

$(quill(?flag))
/// Output

/// End

/// Test #236-1
let t = $table() //note the ending space
a
/// Output
a
/// End

/// Test #236-2
// Space after "table", but no comment
let t = $table() 
a
/// Output
a
/// End

/// Test #239
let x = 5
let static x = 5
/// Error
Compilation error: Cannot define static variable 'x', it already exists in the current file scope.
File '#239', line 2: let static x = 5
                     ^^^^^^^^^^^^^^^^
/// End

/// Test #288-1
let t = @table
  if false
  else
    - item
  end
end

$len($t)
/// Output
1
/// End

/// Test #288-2
let x = if true
end

$(x==empty)
/// Output
true
/// End

/// Test #289
$len(t)
/// Output
1
/// End

/// Test #329
use tests/plume/toimport/touse
$nib()
/// Output
nib
/// End

/// Test #311
let t = $table(x: $false)
$t.x
/// Output
false
/// End

/// Test #330-1
let nib from $import(tests/plume/toimport/touse)
$nib()
$nib()
/// Output
nibnib
/// End

/// Test #330-2
let wing, nib from $import(tests/plume/toimport/touse)
$nib()
$nib()
/// Output
nibnib
/// End

/// Test #345
let t = $table(wing, nib)
do $table.remove($t)

for k, v in items(t)
    $k -> $v\n
end
/// Output
1 -> wing
/// End

/// Test #349
for i in seq(1)
    for i in seq(1)
        break
    end
end
/// Output
/// End

/// Test #354
let t1 = $table(a, b, c)
let t2 = $(table(...t1))
$join(...t2)
/// Output
abc
/// End

/// Test #355
while true
    break
end
a
/// Output
a
/// End