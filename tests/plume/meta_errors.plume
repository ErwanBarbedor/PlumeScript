/// Test meta wrong parameter number 1
let t = @table
  meta add: macro()
    $true
  end
end

$(t+1)
/// Error
Runtime error: Wrong number of positionnal parameters for meta-macro 'add', 0 instead of 2.

Traceback (most recent call first):
  File 'meta wrong parameter number 1', line 1: let t = @table
                                                        ^^^^^^
/// End

/// Test meta wrong parameter number 2
let t = @table
  meta add: macro(x, y, z)
    $true
  end
end

$(t+1)
/// Error
Runtime error: Wrong number of positionnal parameters for meta-macro 'add', 3 instead of 2.

Traceback (most recent call first):
  File 'meta wrong parameter number 2', line 1: let t = @table
                                                        ^^^^^^
/// End

/// Test meta wrong parameter number 3
let t = @table
  meta add: macro(x, y, z: quill)
    $true
  end
end

$(t+1)
/// Error
Runtime error: Meta-macro 'add' dont support named parameters.

Traceback (most recent call first):
  File 'meta wrong parameter number 3', line 1: let t = @table
                                                        ^^^^^^
/// End

/// Test meta wrong parameter number 4
let t = @table
  meta call: macro(x, y, z: quill)
    $true
  end
end

$t(1)
/// Error
Runtime error: Wrong number of positionnal arguments for macro '???', 1 instead of 2.

Traceback (most recent call first):
  File 'meta wrong parameter number 4', line 7: $t(1)
                                                 ^^^^
/// End

/// Test unknow meta
let t = @table
  meta mymacro: macro()
  end
end
/// Error
Runtime error: 'mymacro' isn't a valid meta-macro name.

Traceback (most recent call first):
  File 'unknow meta', line 1: let t = @table
                                      ^^^^^^
/// End

/// Test stack overflow
let t = @table
  meta addr: macro(x)
    $(self+1)
  end
end

$(t+1)
/// Error
Runtime error: Stack overflow

Traceback (most recent call first):
  File 'stack overflow', line 3: $(self+1)
                                   ^^^^^^
  File 'stack overflow', line 3, in macro ???: $(self+1)
                                                 ^^^^^^
    ...
   (same line 1996 more times)
    ...
/// End