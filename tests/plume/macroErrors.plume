/// Test not enought macro args
macro Wings(nib, quill, ink)
end
$Wings(paint, write)
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'Wings', 2 instead of 3.

Traceback (most recent call first):
  File 'not enought macro args', line 3: $Wings(paint, write)
                                          ^^^^^^^^^^^^^^^^^^^
/// End

/// Test to many macro args
macro Wings(nib, quill, ink)
end
$Wings(paint, write, sing, dance)
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'Wings', 4 instead of 3.

Traceback (most recent call first):
  File 'to many macro args', line 3: $Wings(paint, write, sing, dance)
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/// End

/// Test unknow named parameter 1
macro Wings(nib: quill)
end
$Wings(wing: red)
/// Error
Runtime error: Unknow named parameter 'wing' for macro 'Wings'.

Traceback (most recent call first):
  File 'unknow named parameter 1', line 3: $Wings(wing: red)
                                            ^^^^^^^^^^^^^^^^
/// End

/// Test unknow named parameter 2
macro Wings(nib: quill)
end
$Wings(nib: blue, wing: red)
/// Error
Runtime error: Unknow named parameter 'wing' for macro 'Wings'.

Traceback (most recent call first):
  File 'unknow named parameter 2', line 3: $Wings(nib: blue, wing: red)
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
/// End

/// Test get macro name 1
let quill = macro ()
end
$quill(a)
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'quill', 1 instead of 0.

Traceback (most recent call first):
  File 'get macro name 1', line 3: $quill(a)
                                    ^^^^^^^^
/// End

/// Test get macro name 2
let quill = @table
  mark: macro ()
  end
end
$quill.mark(a)
/// Error
Runtime error: Wrong number of positionnal arguments for macro 'mark', 1 instead of 0.

Traceback (most recent call first):
  File 'get macro name 2', line 5: $quill.mark(a)
                                    ^^^^^^^^^^^^^
/// End

/// Test get macro name 3
let quill = @table
  - macro ()
  end
end
$quill[1](a)
/// Error
Runtime error: Wrong number of positionnal arguments for macro '???', 1 instead of 0.

Traceback (most recent call first):
  File 'get macro name 3', line 5: $quill[1](a)
                                    ^^^^^^^^^^^
/// End

/// Test call a non-macro
$(1)()
/// Error
Runtime error: Cannot call a 'number' value.

Traceback (most recent call first):
  File 'call a non-macro', line 1: $(1)()
                                    ^^^^^
/// End

/// Test stack overflow
let static quill
let static mark

set quill = macro()
  $mark()
end

set mark = macro()
  $quill()
end

$mark()
/// Error
Runtime error: Stack overflow

Traceback (most recent call first):
  File 'stack overflow', line 5, in macro quill: $mark()
                                                  ^^^^^^
  These lines are repeated 498 times:
  -------------
  File 'stack overflow', line 5, in macro quill: $mark()
                                                  ^^^^^^
  File 'stack overflow', line 9, in macro mark: $quill()
                                                 ^^^^^^^
  -------------
  File 'stack overflow', line 9, in macro mark: $quill()
                                                 ^^^^^^^
  File 'stack overflow', line 12: $mark()
                                   ^^^^^^
/// End