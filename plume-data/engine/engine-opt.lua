--[[This file is part of Plume

PlumeðŸª¶ is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 3 of the License.

PlumeðŸª¶ is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with PlumeðŸª¶.
If not, see <https://www.gnu.org/licenses/>.
]]

-- Generated by make-engine-opt.lua
-- It is an inlined and optimized version of engine.lua
return function (plume)
    function plume._run (chunk, arguments)
        require ("table.new")
        local runtime = chunk
        local bytecode = chunk.bytecode
        local constants = chunk.constants
        local static = chunk.static
        local ip = 0
        local tic = 0
        local mainStack = table.new (2 ^ 14, 0)
        local mainStackFrames = table.new (2 ^ 8, 0)
        local mainStackPointer = 0
        local mainStackFramesPointer = 0
        local variableStack = table.new (2 ^ 10, 0)
        local variableStackFrames = table.new (2 ^ 8, 0)
        local variableStackPointer = 0
        local variableStackFramesPointer = 0
        local fileStack = table.new (2 ^ 8, 0)
        fileStack[1] = 1
        local fileStackPointer = 1
        local macroStack = table.new (2 ^ 8, 0)
        local macroStackPointer = 0
        local injectionStack = table.new (64, 0)
        local injectionStackPointer = 0
        local jump = 0
        local empty = plume.obj.empty
        local flag = {}
        local ITER_TABLE = 0
        local ITER_SEQ = 1
        local ITER_ITEMS = 2
        local ITER_ENUMS = 3
        local bit = require ("bit")
        local OP_BITS = 7
        local ARG1_BITS = 5
        local ARG2_BITS = 20
        local ARG1_SHIFT = ARG2_BITS
        local OP_SHIFT = ARG1_BITS + ARG2_BITS
        local MASK_OP = bit.lshift (1, OP_BITS) - 1
        local MASK_ARG1 = bit.lshift (1, ARG1_BITS) - 1
        local MASK_ARG2 = bit.lshift (1, ARG2_BITS) - 1
        local band = bit.band
        local rshift = bit.rshift
        local op, arg1, arg2, vmerr, vmserr
        ::DISPATCH::
            if vmerr then
                return false, vmerr, ip, chunk
            end
            if vmserr then
                return false, unpack (vmserr)
            end
            local _ret1, _ret2, _ret3
            local op, arg1, arg2
            if injectionStackPointer > 0 then
                local _ret4, _ret5, _ret6
                do
                    local _ret7
                    injectionStackPointer = injectionStackPointer - 1
                    _ret7 = injectionStack[injectionStackPointer + 1]
                    local arg2 = _ret7
                    local _ret8
                    injectionStackPointer = injectionStackPointer - 1
                    _ret8 = injectionStack[injectionStackPointer + 1]
                    local arg1 = _ret8
                    local _ret9
                    injectionStackPointer = injectionStackPointer - 1
                    _ret9 = injectionStack[injectionStackPointer + 1]
                    local op = _ret9
                    _ret4, _ret5, _ret6 = op, arg1, arg2
                    goto _inline_end4
                end
                ::_inline_end4::
                op, arg1, arg2 = _ret4, _ret5, _ret6
            else
                if jump > 0 then
                    ip = jump
                    jump = 0
                else
                    ip = ip + 1
                end
                tic = tic + 1
                local instr = bytecode[ip]
                op = band (rshift (instr, OP_SHIFT)
                , MASK_OP)
                arg1 = band (rshift (instr, ARG1_SHIFT)
                , MASK_ARG1)
                arg2 = band (instr, MASK_ARG2)
            end
            _ret1, _ret2, _ret3 = op, arg1, arg2
            op, arg1, arg2 = _ret1, _ret2, _ret3
            if op < 32 then
                if op < 16 then
                    if op < 8 then
                        if op < 4 then
                            if op < 2 then
                                if op < 1 then
                                else
                                    goto LOAD_CONSTANT
                                end
                            else
                                if op < 3 then
                                    goto LOAD_TRUE
                                else
                                    goto LOAD_FALSE
                                end
                            end
                        else
                            if op < 6 then
                                if op < 5 then
                                    goto LOAD_EMPTY
                                else
                                    goto LOAD_LOCAL
                                end
                            else
                                if op < 7 then
                                    goto LOAD_STATIC
                                else
                                    goto STORE_LOCAL
                                end
                            end
                        end
                    else
                        if op < 12 then
                            if op < 10 then
                                if op < 9 then
                                    goto STORE_STATIC
                                else
                                    goto STORE_VOID
                                end
                            else
                                if op < 11 then
                                    goto TABLE_NEW
                                else
                                    goto TABLE_SET
                                end
                            end
                        else
                            if op < 14 then
                                if op < 13 then
                                    goto TABLE_INDEX
                                else
                                    goto TABLE_REGISTER_SELF
                                end
                            else
                                if op < 15 then
                                    goto TABLE_SET_META
                                else
                                    goto TABLE_SET_ACC
                                end
                            end
                        end
                    end
                else
                    if op < 24 then
                        if op < 20 then
                            if op < 18 then
                                if op < 17 then
                                    goto TABLE_EXPAND
                                else
                                    goto ENTER_SCOPE
                                end
                            else
                                if op < 19 then
                                    goto LEAVE_SCOPE
                                else
                                    goto BEGIN_ACC
                                end
                            end
                        else
                            if op < 22 then
                                if op < 21 then
                                    goto CONCAT_TABLE
                                else
                                    goto CONCAT_TEXT
                                end
                            else
                                if op < 23 then
                                    goto CONCAT_CALL
                                else
                                    goto CHECK_IS_TEXT
                                end
                            end
                        end
                    else
                        if op < 28 then
                            if op < 26 then
                                if op < 25 then
                                    goto JUMP_IF
                                else
                                    goto JUMP_IF_NOT
                                end
                            else
                                if op < 27 then
                                    goto JUMP_IF_NOT_EMPTY
                                else
                                    goto JUMP
                                end
                            end
                        else
                            if op < 30 then
                                if op < 29 then
                                    goto JUMP_IF_PEEK
                                else
                                    goto JUMP_IF_NOT_PEEK
                                end
                            else
                                if op < 31 then
                                    goto GET_ITER
                                else
                                    goto FOR_ITER
                                end
                            end
                        end
                    end
                end
            else
                if op < 48 then
                    if op < 40 then
                        if op < 36 then
                            if op < 34 then
                                if op < 33 then
                                    goto OP_ADD
                                else
                                    goto OP_MUL
                                end
                            else
                                if op < 35 then
                                    goto OP_SUB
                                else
                                    goto OP_DIV
                                end
                            end
                        else
                            if op < 38 then
                                if op < 37 then
                                    goto OP_NEG
                                else
                                    goto OP_MOD
                                end
                            else
                                if op < 39 then
                                    goto OP_POW
                                else
                                    goto OP_LT
                                end
                            end
                        end
                    else
                        if op < 44 then
                            if op < 42 then
                                if op < 41 then
                                    goto OP_EQ
                                else
                                    goto OP_AND
                                end
                            else
                                if op < 43 then
                                    goto OP_NOT
                                else
                                    goto OP_OR
                                end
                            end
                        else
                            if op < 46 then
                                if op < 45 then
                                    goto DUPLICATE
                                else
                                    goto SWITCH
                                end
                            else
                                if op < 47 then
                                    goto RETURN
                                else
                                    goto END
                                end
                            end
                        end
                    end
                else
                    if op < 56 then
                        if op < 52 then
                            if op < 50 then
                                if op < 49 then
                                    goto STD_LEN
                                else
                                    goto STD_TYPE
                                end
                            else
                                if op < 51 then
                                    goto STD_SEQ
                                else
                                    goto STD_ITEMS
                                end
                            end
                        else
                            if op < 54 then
                                if op < 53 then
                                    goto STD_ENUMERATE
                                end
                            end
                        end
                    end
                end
            end
            ::LOAD_CONSTANT::
                mainStackPointer = mainStackPointer + 1
                mainStack[mainStackPointer] = constants[arg2]
                goto DISPATCH
            ::LOAD_TRUE::
                mainStackPointer = mainStackPointer + 1
                mainStack[mainStackPointer] = true
                goto DISPATCH
            ::LOAD_FALSE::
                mainStackPointer = mainStackPointer + 1
                mainStack[mainStackPointer] = false
                goto DISPATCH
            ::LOAD_EMPTY::
                mainStackPointer = mainStackPointer + 1
                mainStack[mainStackPointer] = empty
                goto DISPATCH
            ::LOAD_LOCAL::
                do
                    local _ret10
                    do
                        local _ret11
                        _ret11 = variableStackFrames[variableStackFramesPointer + (-arg1 or 0)]
                        local _ret12
                        _ret12 = variableStack[_ret11 + (arg2 - 1 or 0) or variableStackPointer]
                        _ret10 = _ret12
                        goto _inline_end18
                    end
                    ::_inline_end18::
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret10
                end
                goto DISPATCH
            ::LOAD_STATIC::
                do
                    local _ret13
                    _ret13 = fileStack[fileStackPointer]
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = static[_ret13][arg2]
                end
                goto DISPATCH
            ::STORE_LOCAL::
                do
                    local _ret14
                    mainStackPointer = mainStackPointer - 1
                    _ret14 = mainStack[mainStackPointer + 1]
                    do
                        local _ret15
                        _ret15 = variableStackFrames[variableStackFramesPointer + -arg1 or 0]
                        variableStack[_ret15 + (arg2 - 1 or 0)] = _ret14
                    end
                end
                goto DISPATCH
            ::STORE_STATIC::
                do
                    local _ret16
                    mainStackPointer = mainStackPointer - 1
                    _ret16 = mainStack[mainStackPointer + 1]
                    local _ret17
                    _ret17 = fileStack[fileStackPointer]
                    static[_ret17][arg2] = _ret16
                end
                goto DISPATCH
            ::STORE_VOID::
                do
                    local _ret18
                    mainStackPointer = mainStackPointer - 1
                    _ret18 = mainStack[mainStackPointer + 1]
                end
                goto DISPATCH
            ::TABLE_NEW::
                mainStackPointer = mainStackPointer + 1
                mainStack[mainStackPointer] = table.new (0, arg1)
                goto DISPATCH
            ::TABLE_SET::
                do
                    local _ret19
                    mainStackPointer = mainStackPointer - 1
                    _ret19 = mainStack[mainStackPointer + 1]
                    local t = _ret19
                    local _ret20
                    mainStackPointer = mainStackPointer - 1
                    _ret20 = mainStack[mainStackPointer + 1]
                    local key = _ret20
                    local _ret21
                    mainStackPointer = mainStackPointer - 1
                    _ret21 = mainStack[mainStackPointer + 1]
                    local value = _ret21
                    if not t.table[key] then
                        table.insert (t.keys, key)
                        if t.meta.table.setindex then
                            local meta = t.meta.table.setindex
                            local args = {key, value}
                            local _ret22
                            table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                            if #plume.runtime.callstack <= 500 then
                                local success, callResult, cip, source = plume.run (meta, args)
                                if success then
                                    table.remove (plume.runtime.callstack)
                                    _ret22 = callResult
                                    goto _inline_end41
                                else
                                    vmserr = {callResult, cip, (source or meta)}
                                end
                            else
                                vmerr = plume.error.stackOverflow ()
                            end
                            ::_inline_end41::
                            value = _ret22
                        end
                    end
                    key = tonumber (key) or key
                    t.table[key] = value
                end
                goto DISPATCH
            ::TABLE_INDEX::
                do
                    local _ret23
                    mainStackPointer = mainStackPointer - 1
                    _ret23 = mainStack[mainStackPointer + 1]
                    local t = _ret23
                    local _ret24
                    mainStackPointer = mainStackPointer - 1
                    _ret24 = mainStack[mainStackPointer + 1]
                    local key = _ret24
                    key = tonumber (key) or key
                    if key == empty then
                        if arg1 == 1 then
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = empty
                        else
                            vmerr = plume.error.cannotUseEmptyAsKey ()
                        end
                    else
                        local _ret26
                        _ret26 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                        goto _inline_end62
                        ::_inline_end62::
                        local tt = _ret26
                        if tt ~= "table" then
                            if arg1 == 1 then
                                mainStackPointer = mainStackPointer + 1
                                mainStack[mainStackPointer] = empty
                            else
                                vmerr = plume.error.cannotIndexValue (tt)
                            end
                        else
                            local value = t.table[key]
                            if value then
                                mainStackPointer = mainStackPointer + 1
                                mainStack[mainStackPointer] = value
                            else
                                if arg1 == 1 then
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = empty
                                elseif t.meta.table.getindex then
                                    local meta = t.meta.table.getindex
                                    local args = {key}
                                    local _ret25
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, args)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret25 = callResult
                                            goto _inline_end56
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end56::
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = _ret25
                                else
                                    if tonumber (key)
                                     then
                                        vmerr = plume.error.invalidKey (key)
                                    else
                                        vmerr = plume.error.unregisteredKey (key)
                                    end
                                end
                            end
                        end
                    end
                end
                goto DISPATCH
            ::TABLE_REGISTER_SELF::
                do
                    local _ret27
                    do
                        local _ret28
                        _ret28 = mainStackFrames[mainStackFramesPointer]
                        local _ret29
                        _ret29 = mainStack[_ret28 or mainStackPointer]
                        _ret27 = _ret29
                        goto _inline_end64
                    end
                    ::_inline_end64::
                    local t = _ret27
                    table.insert (t, "self")
                    local _ret30
                    _ret30 = mainStack[mainStackPointer]
                    table.insert (t, _ret30)
                    table.insert (t, false)
                end
                goto DISPATCH
            ::TABLE_SET_META::
                do
                    local _ret31
                    mainStackPointer = mainStackPointer - 1
                    _ret31 = mainStack[mainStackPointer + 1]
                    local t = _ret31
                    local _ret32
                    mainStackPointer = mainStackPointer - 1
                    _ret32 = mainStack[mainStackPointer + 1]
                    local key = _ret32
                    local _ret33
                    mainStackPointer = mainStackPointer - 1
                    _ret33 = mainStack[mainStackPointer + 1]
                    local value = _ret33
                    t.meta.table[key] = value
                end
                goto DISPATCH
            ::TABLE_SET_ACC::
                do
                    local _ret34
                    do
                        local _ret35
                        _ret35 = mainStackFrames[mainStackFramesPointer]
                        local _ret36
                        _ret36 = mainStack[_ret35 or mainStackPointer]
                        _ret34 = _ret36
                        goto _inline_end73
                    end
                    ::_inline_end73::
                    local t = _ret34
                    local _ret37
                    mainStackPointer = mainStackPointer - 1
                    _ret37 = mainStack[mainStackPointer + 1]
                    table.insert (t, _ret37)
                    local _ret38
                    mainStackPointer = mainStackPointer - 1
                    _ret38 = mainStack[mainStackPointer + 1]
                    table.insert (t, _ret38)
                    table.insert (t, arg2 == 1)
                end
                goto DISPATCH
            ::TABLE_EXPAND::
                do
                    local _ret39
                    mainStackPointer = mainStackPointer - 1
                    _ret39 = mainStack[mainStackPointer + 1]
                    local t = _ret39
                    local _ret40
                    _ret40 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                    local tt = _ret40
                    if tt == "table" then
                        for _, item in ipairs (t.table)
                         do
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = item
                        end
                        local _ret41
                        do
                            local _ret42
                            _ret42 = mainStackFrames[mainStackFramesPointer]
                            local _ret43
                            _ret43 = mainStack[_ret42 or mainStackPointer]
                            _ret41 = _ret43
                            goto _inline_end82
                        end
                        ::_inline_end82::
                        local ft = _ret41
                        for _, key in ipairs (t.keys)
                         do
                            table.insert (ft, key)
                            table.insert (ft, t.table[key])
                            table.insert (ft, false)
                        end
                    else
                        vmerr = plume.error.cannotExpandValue (tt)
                    end
                end
                goto DISPATCH
            ::ENTER_SCOPE::
                do
                    local _ret44
                    _ret44 = variableStackPointer
                    variableStackFramesPointer = variableStackFramesPointer + 1
                    variableStackFrames[variableStackFramesPointer] = _ret44 + 1 - arg1
                    for i = 1, arg2 - arg1 do
                        variableStackPointer = variableStackPointer + 1
                        variableStack[variableStackPointer] = empty
                    end
                end
                goto DISPATCH
            ::LEAVE_SCOPE::
                do
                    local _ret45
                    variableStackFramesPointer = variableStackFramesPointer - 1
                    _ret45 = variableStackFrames[variableStackFramesPointer + 1]
                    variableStackPointer = _ret45 - 1
                end
                goto DISPATCH
            ::BEGIN_ACC::
                mainStackFramesPointer = mainStackFramesPointer + 1
                mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                goto DISPATCH
            ::CONCAT_TABLE::
                do
                    local _ret46
                    _ret46 = mainStackFrames[mainStackFramesPointer]
                    local limit = _ret46 + 1
                    local _ret47
                    _ret47 = mainStackPointer
                    local current = _ret47
                    local _ret48
                    _ret48 = mainStack[limit - 1 or mainStackPointer]
                    local keyTable = _ret48
                    local keyCount = #keyTable / 3
                    local args = plume.obj.table (current - limit + 1, keyCount)
                    for i = 1, current - limit + 1 do
                        local _ret49
                        _ret49 = mainStack[limit + i - 1 or mainStackPointer]
                        args.table[i] = _ret49
                    end
                    for i = 1, #keyTable, 3 do
                        if keyTable[i + 2] then
                            do
                                local _ret50, _ret51
                                do
                                    local comopps = "add mul div sub mod pow"
                                    local binopps = "eq lt"
                                    local unopps = "minus"
                                    local expectedParamCount
                                    for opp in comopps:gmatch ("%S+")
                                     do
                                        if keyTable[i] == opp then
                                            expectedParamCount = 2
                                        elseif keyTable[i]:match ("^" .. opp .. "[rl]")
                                             then
                                            expectedParamCount = 1
                                        end
                                    end
                                    for opp in binopps:gmatch ("%S+")
                                     do
                                        if keyTable[i] == opp then
                                            expectedParamCount = 2
                                        end
                                    end
                                    for opp in unopps:gmatch ("%S+")
                                     do
                                        if keyTable[i] == opp then
                                            expectedParamCount = 0
                                        end
                                    end
                                    if expectedParamCount then
                                        if keyTable[i + 1].positionalParamCount ~= expectedParamCount then
                                            _ret50, _ret51 = false, "Wrong number of positionnal parameters for meta-macro '" .. keyTable[i] .. "', " .. keyTable[i + 1].positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                            goto _inline_end102
                                        end
                                        if keyTable[i + 1].namedParamCount > 1 then
                                            _ret50, _ret51 = false, "Meta-macro '" .. keyTable[i] .. "' dont support named parameters."
                                            goto _inline_end102
                                        end
                                    elseif keyTable[i] ~= "call" and keyTable[i] ~= "tostring" and keyTable[i] ~= "tonumber" and keyTable[i] ~= "getindex" and keyTable[i] ~= "setindex" and keyTable[i] ~= "next" and keyTable[i] ~= "iter" then
                                        _ret50, _ret51 = false, "'" .. keyTable[i] .. "' isn't a valid meta-macro name."
                                        goto _inline_end102
                                    end
                                    _ret50, _ret51 = true
                                    goto _inline_end102
                                end
                                ::_inline_end102::
                                local success, err = _ret50, _ret51
                                if success then
                                    args.meta.table[keyTable[i]] = keyTable[i + 1]
                                else
                                    vmerr = err
                                end
                            end
                        else
                            do
                                local key = keyTable[i]
                                local value = keyTable[i + 1]
                                key = tonumber (key) or key
                                if not args.table[key] then
                                    table.insert (args.keys, keyTable[i])
                                end
                                args.table[key] = value
                            end
                        end
                    end
                    mainStackPointer = limit - 2
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = args
                    do
                        local _ret52
                        mainStackFramesPointer = mainStackFramesPointer - 1
                        _ret52 = mainStackFrames[mainStackFramesPointer + 1]
                    end
                end
                goto DISPATCH
            ::CONCAT_TEXT::
                do
                    local _ret53
                    _ret53 = mainStackFrames[mainStackFramesPointer]
                    local start = _ret53
                    local _ret54
                    _ret54 = mainStackPointer
                    local stop = _ret54
                    for i = start, stop do
                        local _ret55
                        _ret55 = mainStack[i or mainStackPointer]
                        if _ret55 == empty then
                            mainStack[i] = ""
                        end
                    end
                    local acc_text = table.concat (mainStack, "", start, stop)
                    mainStackPointer = start
                    mainStack[start] = acc_text
                    do
                        local _ret56
                        mainStackFramesPointer = mainStackFramesPointer - 1
                        _ret56 = mainStackFrames[mainStackFramesPointer + 1]
                    end
                end
                goto DISPATCH
            ::CONCAT_CALL::
                do
                    local _ret57
                    mainStackPointer = mainStackPointer - 1
                    _ret57 = mainStack[mainStackPointer + 1]
                    local tocall = _ret57
                    local _ret58
                    _ret58 = type (tocall) == "table" and (tocall == empty or tocall.type) or (type (tocall) == "cdata" and tocall.type) or type (tocall)
                    local t = _ret58
                    local self
                    if t == "table" then
                        if tocall.meta and tocall.meta.table.call then
                            self = tocall
                            tocall = tocall.meta.table.call
                            t = tocall.type
                        end
                    end
                    if t == "macro" then
                        local capture = plume.obj.table (0, 0)
                        local arguments = {}
                        do
                            local _ret59
                            _ret59 = mainStackPointer
                            local _ret60
                            _ret60 = mainStackFrames[mainStackFramesPointer]
                            local argcount = _ret59 - _ret60
                            if argcount ~= tocall.positionalParamCount and tocall.variadicOffset == 0 then
                                local name
                                if runtime.mapping[ip - 1] then
                                    name = runtime.mapping[ip - 1].content
                                end
                                if not name then
                                    name = tocall.name or "???"
                                end
                                vmerr = plume.error.wrongArgsCount (name, argcount, tocall.positionalParamCount)
                            end
                            for i = 1, tocall.positionalParamCount do
                                local _ret61
                                _ret61 = mainStack[mainStackPointer + i - argcount]
                                arguments[i] = _ret61
                            end
                            for i = tocall.positionalParamCount + 1, argcount do
                                local _ret62
                                _ret62 = mainStack[mainStackPointer + i - argcount]
                                table.insert (capture.table, _ret62)
                            end
                            do
                                local _ret63
                                _ret63 = mainStackFrames[mainStackFramesPointer]
                                mainStackPointer = _ret63
                            end
                        end
                        do
                            local _ret64
                            do
                                local _ret65
                                _ret65 = mainStackFrames[mainStackFramesPointer]
                                local _ret66
                                _ret66 = mainStack[_ret65 or mainStackPointer]
                                _ret64 = _ret66
                                goto _inline_end131
                            end
                            ::_inline_end131::
                            local stack_bottom = _ret64
                            local err
                            for i = 1, #stack_bottom, 3 do
                                local k = stack_bottom[i]
                                local v = stack_bottom[i + 1]
                                local m = stack_bottom[i + 2]
                                local j = tocall.namedParamOffset[k]
                                if m then
                                    do
                                        local _ret67, _ret68
                                        do
                                            local comopps = "add mul div sub mod pow"
                                            local binopps = "eq lt"
                                            local unopps = "minus"
                                            local expectedParamCount
                                            for opp in comopps:gmatch ("%S+")
                                             do
                                                if k == opp then
                                                    expectedParamCount = 2
                                                elseif k:match ("^" .. opp .. "[rl]")
                                                     then
                                                    expectedParamCount = 1
                                                end
                                            end
                                            for opp in binopps:gmatch ("%S+")
                                             do
                                                if k == opp then
                                                    expectedParamCount = 2
                                                end
                                            end
                                            for opp in unopps:gmatch ("%S+")
                                             do
                                                if k == opp then
                                                    expectedParamCount = 0
                                                end
                                            end
                                            if expectedParamCount then
                                                if v.positionalParamCount ~= expectedParamCount then
                                                    _ret67, _ret68 = false, "Wrong number of positionnal parameters for meta-macro '" .. k .. "', " .. v.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                    goto _inline_end135
                                                end
                                                if v.namedParamCount > 1 then
                                                    _ret67, _ret68 = false, "Meta-macro '" .. k .. "' dont support named parameters."
                                                    goto _inline_end135
                                                end
                                            elseif k ~= "call" and k ~= "tostring" and k ~= "tonumber" and k ~= "getindex" and k ~= "setindex" and k ~= "next" and k ~= "iter" then
                                                _ret67, _ret68 = false, "'" .. k .. "' isn't a valid meta-macro name."
                                                goto _inline_end135
                                            end
                                            _ret67, _ret68 = true
                                            goto _inline_end135
                                        end
                                        ::_inline_end135::
                                        local success, err = _ret67, _ret68
                                        if success then
                                            capture.meta.table[k] = v
                                        else
                                            vmerr = err
                                        end
                                    end
                                elseif j then
                                    arguments[j] = v
                                elseif tocall.variadicOffset > 0 then
                                    do
                                        local key = k
                                        local value = v
                                        key = tonumber (key) or key
                                        if not capture.table[key] then
                                            table.insert (capture.keys, k)
                                        end
                                        capture.table[key] = value
                                    end
                                else
                                    local name = tocall.name or "???"
                                    err = plume.error.unknowParameter (k, name)
                                end
                            end
                            if err then
                                vmerr = err
                            else
                                local _ret69
                                mainStackPointer = mainStackPointer - 1
                                _ret69 = mainStack[mainStackPointer + 1]
                                goto _inline_end139
                                ::_inline_end139::
                            end
                        end
                        if self then
                            table.insert (arguments, self)
                        end
                        if tocall.variadicOffset > 0 then
                            arguments[tocall.variadicOffset] = capture
                        end
                        do
                            local _ret70
                            mainStackFramesPointer = mainStackFramesPointer - 1
                            _ret70 = mainStackFrames[mainStackFramesPointer + 1]
                        end
                        local _ret71
                        table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = tocall, ip = ip})
                        if #plume.runtime.callstack <= 500 then
                            local success, callResult, cip, source = plume.run (tocall, arguments)
                            if success then
                                table.remove (plume.runtime.callstack)
                                _ret71 = callResult
                                goto _inline_end142
                            else
                                vmserr = {callResult, cip, (source or tocall)}
                            end
                        else
                            vmerr = plume.error.stackOverflow ()
                        end
                        ::_inline_end142::
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = _ret71
                    elseif t == "chunk" then
                        do
                            local _ret88
                            _ret88 = variableStackPointer
                            variableStackFramesPointer = variableStackFramesPointer + 1
                            variableStackFrames[variableStackFramesPointer] = _ret88 + 1 - 0
                            for i = 1, tocall.positionalParamCount - 0 do
                                variableStackPointer = variableStackPointer + 1
                                variableStack[variableStackPointer] = empty
                            end
                        end
                        for i = 1, tocall.positionalParamCount do
                            local _ret89
                            do
                                local _ret90
                                _ret90 = mainStackFrames[mainStackFramesPointer]
                                local _ret91
                                _ret91 = mainStack[_ret90 + (i or 0) or mainStackPointer]
                                _ret89 = _ret91
                                goto _inline_end184
                            end
                            ::_inline_end184::
                            do
                                local _ret92
                                _ret92 = variableStackFrames[variableStackFramesPointer or 0]
                                variableStack[_ret92 + (i - 1 or 0)] = _ret89
                            end
                        end
                        do
                            local _ret93
                            mainStackFramesPointer = mainStackFramesPointer - 1
                            _ret93 = mainStackFrames[mainStackFramesPointer + 1]
                            mainStackPointer = _ret93 - 1
                        end
                        macroStackPointer = macroStackPointer + 1
                        macroStack[macroStackPointer] = ip + 1
                        jump = tocall.offset
                    elseif t == "luaFunction" then
                        do
                            local _ret79
                            _ret79 = mainStackFrames[mainStackFramesPointer]
                            local limit = _ret79 + 1
                            local _ret80
                            _ret80 = mainStackPointer
                            local current = _ret80
                            local _ret81
                            _ret81 = mainStack[limit - 1 or mainStackPointer]
                            local keyTable = _ret81
                            local keyCount = #keyTable / 3
                            local args = plume.obj.table (current - limit + 1, keyCount)
                            for i = 1, current - limit + 1 do
                                local _ret82
                                _ret82 = mainStack[limit + i - 1 or mainStackPointer]
                                args.table[i] = _ret82
                            end
                            for i = 1, #keyTable, 3 do
                                if keyTable[i + 2] then
                                    do
                                        local _ret83, _ret84
                                        do
                                            local comopps = "add mul div sub mod pow"
                                            local binopps = "eq lt"
                                            local unopps = "minus"
                                            local expectedParamCount
                                            for opp in comopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 2
                                                elseif keyTable[i]:match ("^" .. opp .. "[rl]")
                                                     then
                                                    expectedParamCount = 1
                                                end
                                            end
                                            for opp in binopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 2
                                                end
                                            end
                                            for opp in unopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 0
                                                end
                                            end
                                            if expectedParamCount then
                                                if keyTable[i + 1].positionalParamCount ~= expectedParamCount then
                                                    _ret83, _ret84 = false, "Wrong number of positionnal parameters for meta-macro '" .. keyTable[i] .. "', " .. keyTable[i + 1].positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                    goto _inline_end169
                                                end
                                                if keyTable[i + 1].namedParamCount > 1 then
                                                    _ret83, _ret84 = false, "Meta-macro '" .. keyTable[i] .. "' dont support named parameters."
                                                    goto _inline_end169
                                                end
                                            elseif keyTable[i] ~= "call" and keyTable[i] ~= "tostring" and keyTable[i] ~= "tonumber" and keyTable[i] ~= "getindex" and keyTable[i] ~= "setindex" and keyTable[i] ~= "next" and keyTable[i] ~= "iter" then
                                                _ret83, _ret84 = false, "'" .. keyTable[i] .. "' isn't a valid meta-macro name."
                                                goto _inline_end169
                                            end
                                            _ret83, _ret84 = true
                                            goto _inline_end169
                                        end
                                        ::_inline_end169::
                                        local success, err = _ret83, _ret84
                                        if success then
                                            args.meta.table[keyTable[i]] = keyTable[i + 1]
                                        else
                                            vmerr = err
                                        end
                                    end
                                else
                                    do
                                        local key = keyTable[i]
                                        local value = keyTable[i + 1]
                                        key = tonumber (key) or key
                                        if not args.table[key] then
                                            table.insert (args.keys, keyTable[i])
                                        end
                                        args.table[key] = value
                                    end
                                end
                            end
                            mainStackPointer = limit - 2
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = args
                            do
                                local _ret85
                                mainStackFramesPointer = mainStackFramesPointer - 1
                                _ret85 = mainStackFrames[mainStackFramesPointer + 1]
                            end
                        end
                        table.insert (runtime.callstack, {runtime = runtime, macro = tocall, ip = ip})
                        local _ret86
                        _ret86 = mainStack[mainStackPointer]
                        local success, result = pcall (tocall.callable, _ret86, runtime)
                        if success then
                            table.remove (chunk.callstack)
                            if result == nil then
                                result = empty
                            end
                            local _ret87
                            mainStackPointer = mainStackPointer - 1
                            _ret87 = mainStack[mainStackPointer + 1]
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        else
                            vmerr = result
                        end
                    elseif t == "luaStdFunction" then
                        do
                            local _ret72
                            _ret72 = mainStackFrames[mainStackFramesPointer]
                            local limit = _ret72 + 1
                            local _ret73
                            _ret73 = mainStackPointer
                            local current = _ret73
                            local _ret74
                            _ret74 = mainStack[limit - 1 or mainStackPointer]
                            local keyTable = _ret74
                            local keyCount = #keyTable / 3
                            local args = plume.obj.table (current - limit + 1, keyCount)
                            for i = 1, current - limit + 1 do
                                local _ret75
                                _ret75 = mainStack[limit + i - 1 or mainStackPointer]
                                args.table[i] = _ret75
                            end
                            for i = 1, #keyTable, 3 do
                                if keyTable[i + 2] then
                                    do
                                        local _ret76, _ret77
                                        do
                                            local comopps = "add mul div sub mod pow"
                                            local binopps = "eq lt"
                                            local unopps = "minus"
                                            local expectedParamCount
                                            for opp in comopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 2
                                                elseif keyTable[i]:match ("^" .. opp .. "[rl]")
                                                     then
                                                    expectedParamCount = 1
                                                end
                                            end
                                            for opp in binopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 2
                                                end
                                            end
                                            for opp in unopps:gmatch ("%S+")
                                             do
                                                if keyTable[i] == opp then
                                                    expectedParamCount = 0
                                                end
                                            end
                                            if expectedParamCount then
                                                if keyTable[i + 1].positionalParamCount ~= expectedParamCount then
                                                    _ret76, _ret77 = false, "Wrong number of positionnal parameters for meta-macro '" .. keyTable[i] .. "', " .. keyTable[i + 1].positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                    goto _inline_end152
                                                end
                                                if keyTable[i + 1].namedParamCount > 1 then
                                                    _ret76, _ret77 = false, "Meta-macro '" .. keyTable[i] .. "' dont support named parameters."
                                                    goto _inline_end152
                                                end
                                            elseif keyTable[i] ~= "call" and keyTable[i] ~= "tostring" and keyTable[i] ~= "tonumber" and keyTable[i] ~= "getindex" and keyTable[i] ~= "setindex" and keyTable[i] ~= "next" and keyTable[i] ~= "iter" then
                                                _ret76, _ret77 = false, "'" .. keyTable[i] .. "' isn't a valid meta-macro name."
                                                goto _inline_end152
                                            end
                                            _ret76, _ret77 = true
                                            goto _inline_end152
                                        end
                                        ::_inline_end152::
                                        local success, err = _ret76, _ret77
                                        if success then
                                            args.meta.table[keyTable[i]] = keyTable[i + 1]
                                        else
                                            vmerr = err
                                        end
                                    end
                                else
                                    do
                                        local key = keyTable[i]
                                        local value = keyTable[i + 1]
                                        key = tonumber (key) or key
                                        if not args.table[key] then
                                            table.insert (args.keys, keyTable[i])
                                        end
                                        args.table[key] = value
                                    end
                                end
                            end
                            mainStackPointer = limit - 2
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = args
                            do
                                local _ret78
                                mainStackFramesPointer = mainStackFramesPointer - 1
                                _ret78 = mainStackFrames[mainStackFramesPointer + 1]
                            end
                        end
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = tocall.opcode
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = 0
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = 0
                    else
                        vmerr = plume.error.cannotCallValue (t)
                    end
                end
                goto DISPATCH
            ::CHECK_IS_TEXT::
                do
                    local _ret94
                    _ret94 = mainStack[mainStackPointer]
                    local value = _ret94
                    local _ret95
                    _ret95 = type (value) == "table" and (value == empty or value.type) or (type (value) == "cdata" and value.type) or type (value)
                    local t = _ret95
                    if t ~= "number" and t ~= "string" and value ~= empty then
                        if t == "table" and value.meta.table.tostring then
                            local meta = value.meta.table.tostring
                            local args = {}
                            local _ret96
                            table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                            if #plume.runtime.callstack <= 500 then
                                local success, callResult, cip, source = plume.run (meta, args)
                                if success then
                                    table.remove (plume.runtime.callstack)
                                    _ret96 = callResult
                                    goto _inline_end199
                                else
                                    vmserr = {callResult, cip, (source or meta)}
                                end
                            else
                                vmerr = plume.error.stackOverflow ()
                            end
                            ::_inline_end199::
                            local _ret97
                            _ret97 = mainStackPointer
                            mainStack[_ret97] = _ret96
                        else
                            vmerr = plume.error.cannotConcatValue (t)
                        end
                    end
                end
                goto DISPATCH
            ::JUMP_IF::
                do
                    local _ret98
                    mainStackPointer = mainStackPointer - 1
                    _ret98 = mainStack[mainStackPointer + 1]
                    local test = _ret98
                    local _ret99
                    if test == empty then
                        _ret99 = false
                        goto _inline_end207
                    end
                    _ret99 = test
                    ::_inline_end207::
                    if _ret99 then
                        jump = arg2
                    end
                end
                goto DISPATCH
            ::JUMP_IF_NOT::
                do
                    local _ret100
                    mainStackPointer = mainStackPointer - 1
                    _ret100 = mainStack[mainStackPointer + 1]
                    local test = _ret100
                    local _ret101
                    if test == empty then
                        _ret101 = false
                        goto _inline_end210
                    end
                    _ret101 = test
                    ::_inline_end210::
                    if not _ret101 then
                        jump = arg2
                    end
                end
                goto DISPATCH
            ::JUMP_IF_NOT_EMPTY::
                do
                    local _ret102
                    mainStackPointer = mainStackPointer - 1
                    _ret102 = mainStack[mainStackPointer + 1]
                    local test = _ret102
                    if test ~= empty then
                        jump = arg2
                    end
                end
                goto DISPATCH
            ::JUMP::
                jump = arg2
                goto DISPATCH
            ::JUMP_IF_PEEK::
                do
                    local _ret103
                    _ret103 = mainStack[mainStackPointer]
                    local test = _ret103
                    local _ret104
                    if test == empty then
                        _ret104 = false
                        goto _inline_end216
                    end
                    _ret104 = test
                    ::_inline_end216::
                    if _ret104 then
                        jump = arg2
                    end
                end
                goto DISPATCH
            ::JUMP_IF_NOT_PEEK::
                do
                    local _ret105
                    _ret105 = mainStack[mainStackPointer]
                    local test = _ret105
                    local _ret106
                    if test == empty then
                        _ret106 = false
                        goto _inline_end219
                    end
                    _ret106 = test
                    ::_inline_end219::
                    if not _ret106 then
                        jump = arg2
                    end
                end
                goto DISPATCH
            ::GET_ITER::
                do
                    local _ret107
                    mainStackPointer = mainStackPointer - 1
                    _ret107 = mainStack[mainStackPointer + 1]
                    local obj = _ret107
                    local _ret108
                    _ret108 = type (obj) == "table" and (obj == empty or obj.type) or (type (obj) == "cdata" and obj.type) or type (obj)
                    local tobj = _ret108
                    local iter, value, flag, macrocall
                    if tobj == "table" then
                        if obj.meta.table.next then
                            iter = obj
                        else
                            iter = obj.meta.table.iter
                        end
                        if iter then
                            if iter.type == "luaFunction" then
                                value = iter.callable ({obj})
                            elseif iter.type == "table" then
                                value = iter
                            elseif iter.type == "macro" then
                                macrocall = true
                            end
                        else
                            value = obj.table
                            flag = ITER_TABLE
                        end
                    elseif tobj == "stdIterator" then
                        value = obj
                        flag = obj.flag
                    else
                        vmerr = plume.error.cannotIterateValue (tobj)
                    end
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = flag
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = 0
                    if macrocall then
                        mainStackFramesPointer = mainStackFramesPointer + 1
                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = table.new (0, 0)
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = obj
                        do
                            local _ret109
                            do
                                local _ret110
                                _ret110 = mainStackFrames[mainStackFramesPointer]
                                local _ret111
                                _ret111 = mainStack[_ret110 or mainStackPointer]
                                _ret109 = _ret111
                                goto _inline_end232
                            end
                            ::_inline_end232::
                            local t = _ret109
                            table.insert (t, "self")
                            local _ret112
                            _ret112 = mainStack[mainStackPointer]
                            table.insert (t, _ret112)
                            table.insert (t, false)
                        end
                        local _ret113
                        mainStackPointer = mainStackPointer - 1
                        _ret113 = mainStack[mainStackPointer + 1]
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = iter
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = 0
                        injectionStackPointer = injectionStackPointer + 1
                        injectionStack[injectionStackPointer] = 0
                    else
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = value
                    end
                end
                goto DISPATCH
            ::FOR_ITER::
                do
                    local _ret114
                    do
                        local _ret115
                        _ret115 = variableStackFrames[variableStackFramesPointer]
                        local _ret116
                        _ret116 = variableStack[_ret115 or variableStackPointer]
                        _ret114 = _ret116
                        goto _inline_end244
                    end
                    ::_inline_end244::
                    local obj = _ret114
                    local _ret117
                    do
                        local _ret118
                        _ret118 = variableStackFrames[variableStackFramesPointer]
                        local _ret119
                        _ret119 = variableStack[_ret118 + 1 or variableStackPointer]
                        _ret117 = _ret119
                        goto _inline_end247
                    end
                    ::_inline_end247::
                    local state = _ret117
                    local _ret120
                    do
                        local _ret121
                        _ret121 = variableStackFrames[variableStackFramesPointer]
                        local _ret122
                        _ret122 = variableStack[_ret121 + 2 or variableStackPointer]
                        _ret120 = _ret122
                        goto _inline_end250
                    end
                    ::_inline_end250::
                    local flag = _ret120
                    local result
                    if flag == ITER_TABLE then
                        state = state + 1
                        if state > #obj then
                            result = empty
                        else
                            result = obj[state]
                        end
                    elseif flag == ITER_SEQ then
                        state = state + obj.step
                        if state > obj.stop then
                            result = empty
                        else
                            result = state
                        end
                    elseif flag == ITER_ENUMS then
                        state = state + 1
                        if state > #obj.ref.table then
                            result = empty
                        else
                            if obj.legacy then
                                result = plume.obj.table (0, 2)
                                result.table.index = state
                                result.table.value = obj.ref.table[state]
                                result.keys = {"index", "value"}
                            else
                                result = plume.obj.table (2, 0)
                                result.table[1] = state
                                result.table[2] = obj.ref.table[state]
                            end
                        end
                    elseif flag == ITER_ITEMS then
                        state = state + 1
                        if state > #obj.ref.keys then
                            result = empty
                        else
                            if obj.legacy then
                                result = plume.obj.table (0, 2)
                                result.table.key = obj.ref.keys[state]
                                result.table.value = obj.ref.table[result.table.key]
                                result.keys = {"key", "value"}
                            else
                                result = plume.obj.table (2, 0)
                                result.table[1] = obj.ref.keys[state]
                                result.table[2] = obj.ref.table[result.table[1]]
                            end
                        end
                    else
                        local iter = obj.meta.table.next
                        if iter.type == "luaFunction" then
                            result = iter.callable ()
                        else
                            local _ret123
                            table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = iter, ip = ip})
                            if #plume.runtime.callstack <= 500 then
                                local success, callResult, cip, source = plume.run (iter, {obj})
                                if success then
                                    table.remove (plume.runtime.callstack)
                                    _ret123 = callResult
                                    goto _inline_end253
                                else
                                    vmserr = {callResult, cip, (source or iter)}
                                end
                            else
                                vmerr = plume.error.stackOverflow ()
                            end
                            ::_inline_end253::
                            result = _ret123
                        end
                    end
                    do
                        local _ret124
                        _ret124 = variableStackFrames[variableStackFramesPointer or 0]
                        variableStack[_ret124 + 1] = state
                    end
                    if result == empty then
                        jump = arg2
                    else
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    end
                end
                goto DISPATCH
            ::OP_ADD::
                do
                    local _ret125
                    mainStackPointer = mainStackPointer - 1
                    _ret125 = mainStack[mainStackPointer + 1]
                    local right = _ret125
                    local _ret126
                    mainStackPointer = mainStackPointer - 1
                    _ret126 = mainStack[mainStackPointer + 1]
                    local left = _ret126
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret127
                        _ret127 = leftNumber + rightNumber
                        result = _ret127
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret141, _ret142
                        do
                            local _ret143
                            _ret143 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret143
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret141, _ret142 = right, "Cannot convert the string value to a number."
                                    goto _inline_end296
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret144
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret144 = callResult
                                            goto _inline_end298
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end298::
                                    _ret141, _ret142 = _ret144
                                    goto _inline_end296
                                else
                                    _ret141, _ret142 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end296
                                end
                            end
                            _ret141, _ret142 = right
                            goto _inline_end296
                        end
                        ::_inline_end296::
                        right, rerr = _ret141, _ret142
                        local _ret137, _ret138
                        do
                            local _ret139
                            _ret139 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret139
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret137, _ret138 = left, "Cannot convert the string value to a number."
                                    goto _inline_end291
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret140
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret140 = callResult
                                            goto _inline_end293
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end293::
                                    _ret137, _ret138 = _ret140
                                    goto _inline_end291
                                else
                                    _ret137, _ret138 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end291
                                end
                            end
                            _ret137, _ret138 = left
                            goto _inline_end291
                        end
                        ::_inline_end291::
                        left, lerr = _ret137, _ret138
                        if lerr or rerr then
                            local _ret128
                            do
                                local meta, param1, param2, paramself
                                local _ret129
                                _ret129 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret129
                                local _ret130
                                _ret130 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret130
                                if tleft == "table" and left.meta and left.meta.table.addr then
                                    meta = left.meta.table.addr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.addl then
                                    meta = right.meta.table.addl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.add then
                                    meta = left.meta.table.add
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.add then
                                    meta = right.meta.table.add
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret131
                                        do
                                            local _ret132
                                            _ret132 = mainStackFrames[mainStackFramesPointer]
                                            local _ret133
                                            _ret133 = mainStack[_ret132 or mainStackPointer]
                                            _ret131 = _ret133
                                            goto _inline_end278
                                        end
                                        ::_inline_end278::
                                        local t = _ret131
                                        table.insert (t, "self")
                                        local _ret134
                                        _ret134 = mainStack[mainStackPointer]
                                        table.insert (t, _ret134)
                                        table.insert (t, false)
                                    end
                                    local _ret135
                                    mainStackPointer = mainStackPointer - 1
                                    _ret135 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret128 = meta
                                goto _inline_end267
                            end
                            ::_inline_end267::
                            local meta = _ret128
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret136
                            _ret136 = left + right
                            goto _inline_end290
                            ::_inline_end290::
                            result = _ret136
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_MUL::
                do
                    local _ret145
                    mainStackPointer = mainStackPointer - 1
                    _ret145 = mainStack[mainStackPointer + 1]
                    local right = _ret145
                    local _ret146
                    mainStackPointer = mainStackPointer - 1
                    _ret146 = mainStack[mainStackPointer + 1]
                    local left = _ret146
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret147
                        _ret147 = leftNumber * rightNumber
                        result = _ret147
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret161, _ret162
                        do
                            local _ret163
                            _ret163 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret163
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret161, _ret162 = right, "Cannot convert the string value to a number."
                                    goto _inline_end336
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret164
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret164 = callResult
                                            goto _inline_end338
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end338::
                                    _ret161, _ret162 = _ret164
                                    goto _inline_end336
                                else
                                    _ret161, _ret162 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end336
                                end
                            end
                            _ret161, _ret162 = right
                            goto _inline_end336
                        end
                        ::_inline_end336::
                        right, rerr = _ret161, _ret162
                        local _ret157, _ret158
                        do
                            local _ret159
                            _ret159 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret159
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret157, _ret158 = left, "Cannot convert the string value to a number."
                                    goto _inline_end331
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret160
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret160 = callResult
                                            goto _inline_end333
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end333::
                                    _ret157, _ret158 = _ret160
                                    goto _inline_end331
                                else
                                    _ret157, _ret158 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end331
                                end
                            end
                            _ret157, _ret158 = left
                            goto _inline_end331
                        end
                        ::_inline_end331::
                        left, lerr = _ret157, _ret158
                        if lerr or rerr then
                            local _ret148
                            do
                                local meta, param1, param2, paramself
                                local _ret149
                                _ret149 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret149
                                local _ret150
                                _ret150 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret150
                                if tleft == "table" and left.meta and left.meta.table.mulr then
                                    meta = left.meta.table.mulr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.mull then
                                    meta = right.meta.table.mull
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.mul then
                                    meta = left.meta.table.mul
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.mul then
                                    meta = right.meta.table.mul
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret151
                                        do
                                            local _ret152
                                            _ret152 = mainStackFrames[mainStackFramesPointer]
                                            local _ret153
                                            _ret153 = mainStack[_ret152 or mainStackPointer]
                                            _ret151 = _ret153
                                            goto _inline_end318
                                        end
                                        ::_inline_end318::
                                        local t = _ret151
                                        table.insert (t, "self")
                                        local _ret154
                                        _ret154 = mainStack[mainStackPointer]
                                        table.insert (t, _ret154)
                                        table.insert (t, false)
                                    end
                                    local _ret155
                                    mainStackPointer = mainStackPointer - 1
                                    _ret155 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret148 = meta
                                goto _inline_end307
                            end
                            ::_inline_end307::
                            local meta = _ret148
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret156
                            _ret156 = left * right
                            goto _inline_end330
                            ::_inline_end330::
                            result = _ret156
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_SUB::
                do
                    local _ret165
                    mainStackPointer = mainStackPointer - 1
                    _ret165 = mainStack[mainStackPointer + 1]
                    local right = _ret165
                    local _ret166
                    mainStackPointer = mainStackPointer - 1
                    _ret166 = mainStack[mainStackPointer + 1]
                    local left = _ret166
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret167
                        _ret167 = leftNumber - rightNumber
                        result = _ret167
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret181, _ret182
                        do
                            local _ret183
                            _ret183 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret183
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret181, _ret182 = right, "Cannot convert the string value to a number."
                                    goto _inline_end376
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret184
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret184 = callResult
                                            goto _inline_end378
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end378::
                                    _ret181, _ret182 = _ret184
                                    goto _inline_end376
                                else
                                    _ret181, _ret182 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end376
                                end
                            end
                            _ret181, _ret182 = right
                            goto _inline_end376
                        end
                        ::_inline_end376::
                        right, rerr = _ret181, _ret182
                        local _ret177, _ret178
                        do
                            local _ret179
                            _ret179 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret179
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret177, _ret178 = left, "Cannot convert the string value to a number."
                                    goto _inline_end371
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret180
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret180 = callResult
                                            goto _inline_end373
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end373::
                                    _ret177, _ret178 = _ret180
                                    goto _inline_end371
                                else
                                    _ret177, _ret178 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end371
                                end
                            end
                            _ret177, _ret178 = left
                            goto _inline_end371
                        end
                        ::_inline_end371::
                        left, lerr = _ret177, _ret178
                        if lerr or rerr then
                            local _ret168
                            do
                                local meta, param1, param2, paramself
                                local _ret169
                                _ret169 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret169
                                local _ret170
                                _ret170 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret170
                                if tleft == "table" and left.meta and left.meta.table.subr then
                                    meta = left.meta.table.subr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.subl then
                                    meta = right.meta.table.subl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.sub then
                                    meta = left.meta.table.sub
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.sub then
                                    meta = right.meta.table.sub
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret171
                                        do
                                            local _ret172
                                            _ret172 = mainStackFrames[mainStackFramesPointer]
                                            local _ret173
                                            _ret173 = mainStack[_ret172 or mainStackPointer]
                                            _ret171 = _ret173
                                            goto _inline_end358
                                        end
                                        ::_inline_end358::
                                        local t = _ret171
                                        table.insert (t, "self")
                                        local _ret174
                                        _ret174 = mainStack[mainStackPointer]
                                        table.insert (t, _ret174)
                                        table.insert (t, false)
                                    end
                                    local _ret175
                                    mainStackPointer = mainStackPointer - 1
                                    _ret175 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret168 = meta
                                goto _inline_end347
                            end
                            ::_inline_end347::
                            local meta = _ret168
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret176
                            _ret176 = left - right
                            goto _inline_end370
                            ::_inline_end370::
                            result = _ret176
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_DIV::
                do
                    local _ret185
                    mainStackPointer = mainStackPointer - 1
                    _ret185 = mainStack[mainStackPointer + 1]
                    local right = _ret185
                    local _ret186
                    mainStackPointer = mainStackPointer - 1
                    _ret186 = mainStack[mainStackPointer + 1]
                    local left = _ret186
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret187
                        _ret187 = leftNumber / rightNumber
                        result = _ret187
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret201, _ret202
                        do
                            local _ret203
                            _ret203 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret203
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret201, _ret202 = right, "Cannot convert the string value to a number."
                                    goto _inline_end416
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret204
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret204 = callResult
                                            goto _inline_end418
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end418::
                                    _ret201, _ret202 = _ret204
                                    goto _inline_end416
                                else
                                    _ret201, _ret202 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end416
                                end
                            end
                            _ret201, _ret202 = right
                            goto _inline_end416
                        end
                        ::_inline_end416::
                        right, rerr = _ret201, _ret202
                        local _ret197, _ret198
                        do
                            local _ret199
                            _ret199 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret199
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret197, _ret198 = left, "Cannot convert the string value to a number."
                                    goto _inline_end411
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret200
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret200 = callResult
                                            goto _inline_end413
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end413::
                                    _ret197, _ret198 = _ret200
                                    goto _inline_end411
                                else
                                    _ret197, _ret198 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end411
                                end
                            end
                            _ret197, _ret198 = left
                            goto _inline_end411
                        end
                        ::_inline_end411::
                        left, lerr = _ret197, _ret198
                        if lerr or rerr then
                            local _ret188
                            do
                                local meta, param1, param2, paramself
                                local _ret189
                                _ret189 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret189
                                local _ret190
                                _ret190 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret190
                                if tleft == "table" and left.meta and left.meta.table.divr then
                                    meta = left.meta.table.divr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.divl then
                                    meta = right.meta.table.divl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.div then
                                    meta = left.meta.table.div
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.div then
                                    meta = right.meta.table.div
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret191
                                        do
                                            local _ret192
                                            _ret192 = mainStackFrames[mainStackFramesPointer]
                                            local _ret193
                                            _ret193 = mainStack[_ret192 or mainStackPointer]
                                            _ret191 = _ret193
                                            goto _inline_end398
                                        end
                                        ::_inline_end398::
                                        local t = _ret191
                                        table.insert (t, "self")
                                        local _ret194
                                        _ret194 = mainStack[mainStackPointer]
                                        table.insert (t, _ret194)
                                        table.insert (t, false)
                                    end
                                    local _ret195
                                    mainStackPointer = mainStackPointer - 1
                                    _ret195 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret188 = meta
                                goto _inline_end387
                            end
                            ::_inline_end387::
                            local meta = _ret188
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret196
                            _ret196 = left / right
                            goto _inline_end410
                            ::_inline_end410::
                            result = _ret196
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_NEG::
                do
                    local _ret205
                    mainStackPointer = mainStackPointer - 1
                    _ret205 = mainStack[mainStackPointer + 1]
                    local x = _ret205
                    local err
                    local _ret206, _ret207
                    do
                        local _ret208
                        _ret208 = type (x) == "table" and (x == empty or x.type) or (type (x) == "cdata" and x.type) or type (x)
                        local tx = _ret208
                        if tx == "string" then
                            x = tonumber (x)
                            if not x then
                                _ret206, _ret207 = x, "Cannot convert the string value to a number."
                                goto _inline_end424
                            end
                        elseif tx ~= "number" then
                            if tx == "table" and x.meta.table.tonumber then
                                local meta = x.meta.table.tonumber
                                local params = {}
                                local _ret209
                                table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                if #plume.runtime.callstack <= 500 then
                                    local success, callResult, cip, source = plume.run (meta, params)
                                    if success then
                                        table.remove (plume.runtime.callstack)
                                        _ret209 = callResult
                                        goto _inline_end426
                                    else
                                        vmserr = {callResult, cip, (source or meta)}
                                    end
                                else
                                    vmerr = plume.error.stackOverflow ()
                                end
                                ::_inline_end426::
                                _ret206, _ret207 = _ret209
                                goto _inline_end424
                            else
                                _ret206, _ret207 = x, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                goto _inline_end424
                            end
                        end
                        _ret206, _ret207 = x
                        goto _inline_end424
                    end
                    ::_inline_end424::
                    x, err = _ret206, _ret207
                    if err then
                        local _ret210, _ret211
                        do
                            local meta
                            local params = {x}
                            local _ret212
                            _ret212 = type (x) == "table" and (x == empty or x.type) or (type (x) == "cdata" and x.type) or type (x)
                            if _ret212 == "table" and x.meta and x.meta.table.minus then
                                meta = x.meta.table.minus
                            end
                            if not meta then
                                _ret210 = false
                                goto _inline_end429
                            end
                            local _ret213
                            table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                            if #plume.runtime.callstack <= 500 then
                                local success, callResult, cip, source = plume.run (meta, params)
                                if success then
                                    table.remove (plume.runtime.callstack)
                                    _ret213 = callResult
                                    goto _inline_end431
                                else
                                    vmserr = {callResult, cip, (source or meta)}
                                end
                            else
                                vmerr = plume.error.stackOverflow ()
                            end
                            ::_inline_end431::
                            _ret210, _ret211 = true, _ret213
                            goto _inline_end429
                        end
                        ::_inline_end429::
                        success, result = _ret210, _ret211
                    else
                        success = true
                        local _ret214
                        _ret214 = -x
                        goto _inline_end434
                        ::_inline_end434::
                        result = _ret214
                    end
                    if success then
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        vmerr = err
                    end
                end
                goto DISPATCH
            ::OP_MOD::
                do
                    local _ret215
                    mainStackPointer = mainStackPointer - 1
                    _ret215 = mainStack[mainStackPointer + 1]
                    local right = _ret215
                    local _ret216
                    mainStackPointer = mainStackPointer - 1
                    _ret216 = mainStack[mainStackPointer + 1]
                    local left = _ret216
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret217
                        _ret217 = leftNumber % rightNumber
                        result = _ret217
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret231, _ret232
                        do
                            local _ret233
                            _ret233 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret233
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret231, _ret232 = right, "Cannot convert the string value to a number."
                                    goto _inline_end472
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret234
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret234 = callResult
                                            goto _inline_end474
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end474::
                                    _ret231, _ret232 = _ret234
                                    goto _inline_end472
                                else
                                    _ret231, _ret232 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end472
                                end
                            end
                            _ret231, _ret232 = right
                            goto _inline_end472
                        end
                        ::_inline_end472::
                        right, rerr = _ret231, _ret232
                        local _ret227, _ret228
                        do
                            local _ret229
                            _ret229 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret229
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret227, _ret228 = left, "Cannot convert the string value to a number."
                                    goto _inline_end467
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret230
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret230 = callResult
                                            goto _inline_end469
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end469::
                                    _ret227, _ret228 = _ret230
                                    goto _inline_end467
                                else
                                    _ret227, _ret228 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end467
                                end
                            end
                            _ret227, _ret228 = left
                            goto _inline_end467
                        end
                        ::_inline_end467::
                        left, lerr = _ret227, _ret228
                        if lerr or rerr then
                            local _ret218
                            do
                                local meta, param1, param2, paramself
                                local _ret219
                                _ret219 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret219
                                local _ret220
                                _ret220 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret220
                                if tleft == "table" and left.meta and left.meta.table.modr then
                                    meta = left.meta.table.modr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.modl then
                                    meta = right.meta.table.modl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.mod then
                                    meta = left.meta.table.mod
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.mod then
                                    meta = right.meta.table.mod
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret221
                                        do
                                            local _ret222
                                            _ret222 = mainStackFrames[mainStackFramesPointer]
                                            local _ret223
                                            _ret223 = mainStack[_ret222 or mainStackPointer]
                                            _ret221 = _ret223
                                            goto _inline_end454
                                        end
                                        ::_inline_end454::
                                        local t = _ret221
                                        table.insert (t, "self")
                                        local _ret224
                                        _ret224 = mainStack[mainStackPointer]
                                        table.insert (t, _ret224)
                                        table.insert (t, false)
                                    end
                                    local _ret225
                                    mainStackPointer = mainStackPointer - 1
                                    _ret225 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret218 = meta
                                goto _inline_end443
                            end
                            ::_inline_end443::
                            local meta = _ret218
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret226
                            _ret226 = left % right
                            goto _inline_end466
                            ::_inline_end466::
                            result = _ret226
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_POW::
                do
                    local _ret235
                    mainStackPointer = mainStackPointer - 1
                    _ret235 = mainStack[mainStackPointer + 1]
                    local right = _ret235
                    local _ret236
                    mainStackPointer = mainStackPointer - 1
                    _ret236 = mainStack[mainStackPointer + 1]
                    local left = _ret236
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret237
                        _ret237 = leftNumber ^ rightNumber
                        result = _ret237
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret251, _ret252
                        do
                            local _ret253
                            _ret253 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret253
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret251, _ret252 = right, "Cannot convert the string value to a number."
                                    goto _inline_end512
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret254
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret254 = callResult
                                            goto _inline_end514
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end514::
                                    _ret251, _ret252 = _ret254
                                    goto _inline_end512
                                else
                                    _ret251, _ret252 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end512
                                end
                            end
                            _ret251, _ret252 = right
                            goto _inline_end512
                        end
                        ::_inline_end512::
                        right, rerr = _ret251, _ret252
                        local _ret247, _ret248
                        do
                            local _ret249
                            _ret249 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret249
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret247, _ret248 = left, "Cannot convert the string value to a number."
                                    goto _inline_end507
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret250
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret250 = callResult
                                            goto _inline_end509
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end509::
                                    _ret247, _ret248 = _ret250
                                    goto _inline_end507
                                else
                                    _ret247, _ret248 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end507
                                end
                            end
                            _ret247, _ret248 = left
                            goto _inline_end507
                        end
                        ::_inline_end507::
                        left, lerr = _ret247, _ret248
                        if lerr or rerr then
                            local _ret238
                            do
                                local meta, param1, param2, paramself
                                local _ret239
                                _ret239 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret239
                                local _ret240
                                _ret240 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret240
                                if tleft == "table" and left.meta and left.meta.table.powr then
                                    meta = left.meta.table.powr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.powl then
                                    meta = right.meta.table.powl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.pow then
                                    meta = left.meta.table.pow
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.pow then
                                    meta = right.meta.table.pow
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret241
                                        do
                                            local _ret242
                                            _ret242 = mainStackFrames[mainStackFramesPointer]
                                            local _ret243
                                            _ret243 = mainStack[_ret242 or mainStackPointer]
                                            _ret241 = _ret243
                                            goto _inline_end494
                                        end
                                        ::_inline_end494::
                                        local t = _ret241
                                        table.insert (t, "self")
                                        local _ret244
                                        _ret244 = mainStack[mainStackPointer]
                                        table.insert (t, _ret244)
                                        table.insert (t, false)
                                    end
                                    local _ret245
                                    mainStackPointer = mainStackPointer - 1
                                    _ret245 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret238 = meta
                                goto _inline_end483
                            end
                            ::_inline_end483::
                            local meta = _ret238
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret246
                            _ret246 = left ^ right
                            goto _inline_end506
                            ::_inline_end506::
                            result = _ret246
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_LT::
                do
                    local _ret255
                    mainStackPointer = mainStackPointer - 1
                    _ret255 = mainStack[mainStackPointer + 1]
                    local right = _ret255
                    local _ret256
                    mainStackPointer = mainStackPointer - 1
                    _ret256 = mainStack[mainStackPointer + 1]
                    local left = _ret256
                    local rightNumber = tonumber (right)
                    local leftNumber = tonumber (left)
                    if rightNumber and leftNumber then
                        local _ret257
                        _ret257 = leftNumber < rightNumber
                        result = _ret257
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    else
                        local rerr, lerr
                        local _ret271, _ret272
                        do
                            local _ret273
                            _ret273 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                            local tx = _ret273
                            if tx == "string" then
                                right = tonumber (right)
                                if not right then
                                    _ret271, _ret272 = right, "Cannot convert the string value to a number."
                                    goto _inline_end552
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and right.meta.table.tonumber then
                                    local meta = right.meta.table.tonumber
                                    local params = {}
                                    local _ret274
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret274 = callResult
                                            goto _inline_end554
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end554::
                                    _ret271, _ret272 = _ret274
                                    goto _inline_end552
                                else
                                    _ret271, _ret272 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end552
                                end
                            end
                            _ret271, _ret272 = right
                            goto _inline_end552
                        end
                        ::_inline_end552::
                        right, rerr = _ret271, _ret272
                        local _ret267, _ret268
                        do
                            local _ret269
                            _ret269 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                            local tx = _ret269
                            if tx == "string" then
                                left = tonumber (left)
                                if not left then
                                    _ret267, _ret268 = left, "Cannot convert the string value to a number."
                                    goto _inline_end547
                                end
                            elseif tx ~= "number" then
                                if tx == "table" and left.meta.table.tonumber then
                                    local meta = left.meta.table.tonumber
                                    local params = {}
                                    local _ret270
                                    table.insert (plume.runtime.callstack, {chunk = plume.runtime, macro = meta, ip = ip})
                                    if #plume.runtime.callstack <= 500 then
                                        local success, callResult, cip, source = plume.run (meta, params)
                                        if success then
                                            table.remove (plume.runtime.callstack)
                                            _ret270 = callResult
                                            goto _inline_end549
                                        else
                                            vmserr = {callResult, cip, (source or meta)}
                                        end
                                    else
                                        vmerr = plume.error.stackOverflow ()
                                    end
                                    ::_inline_end549::
                                    _ret267, _ret268 = _ret270
                                    goto _inline_end547
                                else
                                    _ret267, _ret268 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                    goto _inline_end547
                                end
                            end
                            _ret267, _ret268 = left
                            goto _inline_end547
                        end
                        ::_inline_end547::
                        left, lerr = _ret267, _ret268
                        if lerr or rerr then
                            local _ret258
                            do
                                local meta, param1, param2, paramself
                                local _ret259
                                _ret259 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                local tleft = _ret259
                                local _ret260
                                _ret260 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                local tright = _ret260
                                if tleft == "table" and left.meta and left.meta.table.ltr then
                                    meta = left.meta.table.ltr
                                    param1 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.ltl then
                                    meta = right.meta.table.ltl
                                    param1 = left
                                    paramself = right
                                elseif tleft == "table" and left.meta and left.meta.table.lt then
                                    meta = left.meta.table.lt
                                    param1 = left
                                    param2 = right
                                    paramself = left
                                elseif tright == "table" and right.meta and right.meta.table.lt then
                                    meta = right.meta.table.lt
                                    param1 = left
                                    param2 = right
                                    paramself = right
                                end
                                if meta then
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, 0)
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = param1
                                    if param2 then
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = param2
                                    end
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = paramself
                                    do
                                        local _ret261
                                        do
                                            local _ret262
                                            _ret262 = mainStackFrames[mainStackFramesPointer]
                                            local _ret263
                                            _ret263 = mainStack[_ret262 or mainStackPointer]
                                            _ret261 = _ret263
                                            goto _inline_end534
                                        end
                                        ::_inline_end534::
                                        local t = _ret261
                                        table.insert (t, "self")
                                        local _ret264
                                        _ret264 = mainStack[mainStackPointer]
                                        table.insert (t, _ret264)
                                        table.insert (t, false)
                                    end
                                    local _ret265
                                    mainStackPointer = mainStackPointer - 1
                                    _ret265 = mainStack[mainStackPointer + 1]
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = meta
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                    injectionStackPointer = injectionStackPointer + 1
                                    injectionStack[injectionStackPointer] = 0
                                end
                                _ret258 = meta
                                goto _inline_end523
                            end
                            ::_inline_end523::
                            local meta = _ret258
                            if not meta then
                                vmerr = lerr or rerr
                            end
                        else
                            local _ret266
                            _ret266 = left < right
                            goto _inline_end546
                            ::_inline_end546::
                            result = _ret266
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = result
                        end
                    end
                end
                goto DISPATCH
            ::OP_EQ::
                do
                    local _ret275
                    mainStackPointer = mainStackPointer - 1
                    _ret275 = mainStack[mainStackPointer + 1]
                    local right = _ret275
                    local _ret276
                    mainStackPointer = mainStackPointer - 1
                    _ret276 = mainStack[mainStackPointer + 1]
                    local left = _ret276
                    local _ret277
                    do
                        local meta, param1, param2, paramself
                        local _ret278
                        _ret278 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                        local tleft = _ret278
                        local _ret279
                        _ret279 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                        local tright = _ret279
                        if tleft == "table" and left.meta and left.meta.table.eqr then
                            meta = left.meta.table.eqr
                            param1 = right
                            paramself = left
                        elseif tright == "table" and right.meta and right.meta.table.eql then
                            meta = right.meta.table.eql
                            param1 = left
                            paramself = right
                        elseif tleft == "table" and left.meta and left.meta.table.eq then
                            meta = left.meta.table.eq
                            param1 = left
                            param2 = right
                            paramself = left
                        elseif tright == "table" and right.meta and right.meta.table.eq then
                            meta = right.meta.table.eq
                            param1 = left
                            param2 = right
                            paramself = right
                        end
                        if meta then
                            mainStackFramesPointer = mainStackFramesPointer + 1
                            mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = table.new (0, 0)
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = param1
                            if param2 then
                                mainStackPointer = mainStackPointer + 1
                                mainStack[mainStackPointer] = param2
                            end
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = paramself
                            do
                                local _ret280
                                do
                                    local _ret281
                                    _ret281 = mainStackFrames[mainStackFramesPointer]
                                    local _ret282
                                    _ret282 = mainStack[_ret281 or mainStackPointer]
                                    _ret280 = _ret282
                                    goto _inline_end571
                                end
                                ::_inline_end571::
                                local t = _ret280
                                table.insert (t, "self")
                                local _ret283
                                _ret283 = mainStack[mainStackPointer]
                                table.insert (t, _ret283)
                                table.insert (t, false)
                            end
                            local _ret284
                            mainStackPointer = mainStackPointer - 1
                            _ret284 = mainStack[mainStackPointer + 1]
                            mainStackPointer = mainStackPointer + 1
                            mainStack[mainStackPointer] = meta
                            injectionStackPointer = injectionStackPointer + 1
                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                            injectionStackPointer = injectionStackPointer + 1
                            injectionStack[injectionStackPointer] = 0
                            injectionStackPointer = injectionStackPointer + 1
                            injectionStack[injectionStackPointer] = 0
                        end
                        _ret277 = meta
                        goto _inline_end560
                    end
                    ::_inline_end560::
                    local meta = _ret277
                    if not meta then
                        local result = left == right or tonumber (left) and tonumber (left) == tonumber (right) or (false)
                        mainStackPointer = mainStackPointer + 1
                        mainStack[mainStackPointer] = result
                    end
                end
                goto DISPATCH
            ::OP_AND::
                do
                    local _ret285
                    mainStackPointer = mainStackPointer - 1
                    _ret285 = mainStack[mainStackPointer + 1]
                    local right = _ret285
                    local _ret286
                    mainStackPointer = mainStackPointer - 1
                    _ret286 = mainStack[mainStackPointer + 1]
                    local left = _ret286
                    local _ret287
                    if right == empty then
                        _ret287 = false
                        goto _inline_end586
                    end
                    _ret287 = right
                    ::_inline_end586::
                    right = _ret287
                    local _ret288
                    if left == empty then
                        _ret288 = false
                        goto _inline_end587
                    end
                    _ret288 = left
                    ::_inline_end587::
                    left = _ret288
                    local _ret289
                    _ret289 = right and left
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret289
                end
                goto DISPATCH
            ::OP_NOT::
                do
                    local _ret290
                    mainStackPointer = mainStackPointer - 1
                    _ret290 = mainStack[mainStackPointer + 1]
                    local x = _ret290
                    local _ret291
                    if x == empty then
                        _ret291 = false
                        goto _inline_end593
                    end
                    _ret291 = x
                    ::_inline_end593::
                    x = _ret291
                    local _ret292
                    _ret292 = not x
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret292
                end
                goto DISPATCH
            ::OP_OR::
                do
                    local _ret293
                    mainStackPointer = mainStackPointer - 1
                    _ret293 = mainStack[mainStackPointer + 1]
                    local right = _ret293
                    local _ret294
                    mainStackPointer = mainStackPointer - 1
                    _ret294 = mainStack[mainStackPointer + 1]
                    local left = _ret294
                    local _ret295
                    if right == empty then
                        _ret295 = false
                        goto _inline_end600
                    end
                    _ret295 = right
                    ::_inline_end600::
                    right = _ret295
                    local _ret296
                    if left == empty then
                        _ret296 = false
                        goto _inline_end601
                    end
                    _ret296 = left
                    ::_inline_end601::
                    left = _ret296
                    local _ret297
                    _ret297 = right or left
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret297
                end
                goto DISPATCH
            ::DUPLICATE::
                do
                    local _ret298
                    _ret298 = mainStack[mainStackPointer]
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret298
                end
                goto DISPATCH
            ::SWITCH::
                do
                    local _ret299
                    mainStackPointer = mainStackPointer - 1
                    _ret299 = mainStack[mainStackPointer + 1]
                    local x = _ret299
                    local _ret300
                    mainStackPointer = mainStackPointer - 1
                    _ret300 = mainStack[mainStackPointer + 1]
                    local y = _ret300
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = x
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = y
                end
                goto DISPATCH
            ::RETURN::
                do
                    do
                        local _ret301
                        variableStackFramesPointer = variableStackFramesPointer - 1
                        _ret301 = variableStackFrames[variableStackFramesPointer + 1]
                        variableStackPointer = _ret301 - 1
                    end
                    local _ret302
                    macroStackPointer = macroStackPointer - 1
                    _ret302 = macroStack[macroStackPointer + 1]
                    jump = _ret302
                end
                goto DISPATCH
            ::STD_LEN::
                do
                    local _ret303
                    mainStackPointer = mainStackPointer - 1
                    _ret303 = mainStack[mainStackPointer + 1]
                    local t = _ret303.table[1]
                    local tt = type (t)
                    local result
                    if tt == "table" then
                        result = #t.table
                    elseif tt == "string" then
                        result = #t
                    else
                        vmerr = plume.error.hasNoLen (tt)
                    end
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = result
                end
                goto DISPATCH
            ::STD_TYPE::
                do
                    local _ret304
                    mainStackPointer = mainStackPointer - 1
                    _ret304 = mainStack[mainStackPointer + 1]
                    local t = _ret304.table[1]
                    local _ret305
                    _ret305 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = _ret305
                end
                goto DISPATCH
            ::STD_SEQ::
                do
                    local _ret306
                    mainStackPointer = mainStackPointer - 1
                    _ret306 = mainStack[mainStackPointer + 1]
                    local args = _ret306.table
                    local start = args[1]
                    local stop = args[2]
                    local step = args[3] or 1
                    if not stop then
                        stop = start
                        start = 1
                    end
                    start = tonumber (start)
                    stop = tonumber (stop)
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = {type = "stdIterator", start = start, stop = stop, step = step, flag = ITER_SEQ}
                end
                goto DISPATCH
            ::STD_ITEMS::
                do
                    local _ret307
                    mainStackPointer = mainStackPointer - 1
                    _ret307 = mainStack[mainStackPointer + 1]
                    local args = _ret307.table
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = {type = "stdIterator", ref = args[1], flag = ITER_ITEMS, legacy = args.legacy}
                end
                goto DISPATCH
            ::STD_ENUMERATE::
                do
                    local _ret308
                    mainStackPointer = mainStackPointer - 1
                    _ret308 = mainStack[mainStackPointer + 1]
                    local args = _ret308.table
                    mainStackPointer = mainStackPointer + 1
                    mainStack[mainStackPointer] = {type = "stdIterator", ref = args[1], flag = ITER_ENUMS, legacy = args.legacy}
                end
                goto DISPATCH
            ::END::
            local _ret309
            _ret309 = mainStack[mainStackPointer]
            return true, _ret309
        end
    end
    