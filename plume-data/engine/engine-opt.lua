--[[This file is part of Plume

PlumeðŸª¶ is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 3 of the License.

PlumeðŸª¶ is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with PlumeðŸª¶.
If not, see <https://www.gnu.org/licenses/>.
]]

-- Generated by make-engine-opt.lua
-- It is an inlined and optimized version of engine.lua
return function (plume)
    function plume._run (runtime, chunk)
        function _STAT_REGISTER (vm, op)
            stats.ophist = ((stats.ophist % stats.histmask) * 128) + op
            stats.opseq[stats.ophist] = 1 + (stats.opseq[stats.ophist] or 0)
        end
        require ("table.new")
        local runtime = runtime
        local bytecode = runtime.bytecode
        local constants = runtime.constants
        local static = runtime.static
        local ip = chunk.offset - 1
        local tic = 0
        local mainStack = table.new (2 ^ 14, 0)
        local mainStackFrames = table.new (2 ^ 8, 0)
        local mainStackPointer = 0
        local mainStackFramesPointer = 0
        local variableStack = table.new (2 ^ 10, 0)
        local variableStackFrames = table.new (2 ^ 8, 0)
        local variableStackPointer = 0
        local variableStackFramesPointer = 0
        local fileStack = table.new (2 ^ 8, 0)
        fileStack[1] = chunk.fileID
        local fileStackPointer = 1
        local macroStack = table.new (2 ^ 8, 0)
        local macroStackPointer = 0
        local injectionStack = table.new (64, 0)
        local injectionStackPointer = 0
        local tagStack = table.new (2 ^ 14, 0)
        local jump = 0
        local empty = plume.obj.empty
        local flag = {}
        local ITER_TABLE = 0
        local ITER_SEQ = 1
        local ITER_ITEMS = 2
        local ITER_ENUMS = 3
        local bit = require ("bit")
        local OP_BITS = plume.OP_BITS
        local ARG1_BITS = plume.ARG1_BITS
        local ARG2_BITS = plume.ARG2_BITS
        local ARG1_SHIFT = ARG2_BITS
        local OP_SHIFT = ARG1_BITS + ARG2_BITS
        local MASK_OP = bit.lshift (1, OP_BITS) - 1
        local MASK_ARG1 = bit.lshift (1, ARG1_BITS) - 1
        local MASK_ARG2 = bit.lshift (1, ARG2_BITS) - 1
        local band = bit.band
        local rshift = bit.rshift
        local op, arg1, arg2, vmerr, vmserr
        ::DISPATCH::
            if vmerr then
                return false, vmerr, ip
            end
            local _ret1, _ret2, _ret3
            local op, arg1, arg2
            local _ret11
            do
                local _ret12
                _ret12 = injectionStack[injectionStackPointer]
                local _ret13
                _ret13 = macroStackPointer
                _ret11 = injectionStackPointer > 0 and _ret12 == _ret13
                goto _inline_end9
            end
            ::_inline_end9::
            if _ret11 then
                local _ret4, _ret5, _ret6
                do
                    local _ret7
                    injectionStackPointer = injectionStackPointer - 1
                    _ret7 = injectionStack[injectionStackPointer + 1]
                    local _ret8
                    injectionStackPointer = injectionStackPointer - 1
                    _ret8 = injectionStack[injectionStackPointer + 1]
                    local arg2 = _ret8
                    local _ret9
                    injectionStackPointer = injectionStackPointer - 1
                    _ret9 = injectionStack[injectionStackPointer + 1]
                    local arg1 = _ret9
                    local _ret10
                    injectionStackPointer = injectionStackPointer - 1
                    _ret10 = injectionStack[injectionStackPointer + 1]
                    local op = _ret10
                    _ret4, _ret5, _ret6 = op, arg1, arg2
                    goto _inline_end4
                end
                ::_inline_end4::
                op, arg1, arg2 = _ret4, _ret5, _ret6
            else
                if jump > 0 then
                    ip = jump
                    jump = 0
                else
                    ip = ip + 1
                end
                tic = tic + 1
                local instr = bytecode[ip]
                op = band (rshift (instr, OP_SHIFT)
                , MASK_OP)
                arg1 = band (rshift (instr, ARG1_SHIFT)
                , MASK_ARG1)
                arg2 = band (instr, MASK_ARG2)
            end
            _ret1, _ret2, _ret3 = op, arg1, arg2
            op, arg1, arg2 = _ret1, _ret2, _ret3
            if op < 32 then
                if op < 16 then
                    if op < 8 then
                        if op < 4 then
                            if op < 2 then
                                if op < 1 then
                                else
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = constants[arg2]
                                end
                            else
                                if op < 3 then
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = true
                                else
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = false
                                end
                            end
                        else
                            if op < 6 then
                                if op < 5 then
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = empty
                                else
                                    do
                                        local _ret14
                                        do
                                            local _ret15
                                            _ret15 = variableStackFrames[variableStackFramesPointer + (-arg1 or 0)]
                                            local _ret16
                                            _ret16 = variableStack[_ret15 + (arg2 - 1 or 0) or variableStackPointer]
                                            _ret14 = _ret16
                                            goto _inline_end22
                                        end
                                        ::_inline_end22::
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret14
                                    end
                                end
                            else
                                if op < 7 then
                                    do
                                        local _ret17
                                        for i = #runtime.callstack, 1, -1 do
                                            local call = runtime.callstack[i]
                                            if call.macro and call.macro.static then
                                                _ret17 = call.macro.static
                                                goto _inline_end27
                                            end
                                        end
                                        _ret17 = static[fileStack[fileStackPointer]]
                                        ::_inline_end27::
                                        local currentStatic = _ret17
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = currentStatic[arg2]
                                    end
                                else
                                    do
                                        local _ret18
                                        mainStackPointer = mainStackPointer - 1
                                        _ret18 = mainStack[mainStackPointer + 1]
                                        local key = _ret18
                                        local _ret19
                                        _ret19 = mainStackFramesPointer
                                        local _ret20
                                        _ret20 = mainStackFrames[_ret19 - arg1 or mainStackFramesPointer]
                                        local frameOffset = _ret20
                                        local frameTop
                                        if arg1 == 0 then
                                            local _ret21
                                            _ret21 = mainStackPointer
                                            frameTop = _ret21
                                        else
                                            local _ret22
                                            _ret22 = mainStackFramesPointer
                                            goto _inline_end34
                                            ::_inline_end34::
                                            local _ret23
                                            _ret23 = mainStackFrames[_ret22 - arg1 + 1 or mainStackFramesPointer]
                                            goto _inline_end35
                                            ::_inline_end35::
                                            frameTop = _ret23
                                        end
                                        local found
                                        for i = frameTop, frameOffset, -1 do
                                            if tagStack[i] == "key" then
                                                local _ret25
                                                _ret25 = mainStack[i or mainStackPointer]
                                                if _ret25 == key then
                                                    found = true
                                                    local _ret24
                                                    _ret24 = mainStack[i - 1 or mainStackPointer]
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = _ret24
                                                    break
                                                end
                                            end
                                        end
                                        if not found then
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = plume.obj.empty
                                        end
                                    end
                                end
                            end
                        end
                    else
                        if op < 12 then
                            if op < 10 then
                                if op < 9 then
                                    do
                                        local _ret26
                                        mainStackPointer = mainStackPointer - 1
                                        _ret26 = mainStack[mainStackPointer + 1]
                                        do
                                            local _ret27
                                            _ret27 = variableStackFrames[variableStackFramesPointer + -arg1 or 0]
                                            variableStack[_ret27 + (arg2 - 1 or 0)] = _ret26
                                        end
                                    end
                                else
                                    do
                                        local _ret28
                                        for i = #runtime.callstack, 1, -1 do
                                            local call = runtime.callstack[i]
                                            if call.macro and call.macro.static then
                                                _ret28 = call.macro.static
                                                goto _inline_end46
                                            end
                                        end
                                        _ret28 = static[fileStack[fileStackPointer]]
                                        ::_inline_end46::
                                        local currentStatic = _ret28
                                        local _ret29
                                        mainStackPointer = mainStackPointer - 1
                                        _ret29 = mainStack[mainStackPointer + 1]
                                        currentStatic[arg2] = _ret29
                                    end
                                end
                            else
                                if op < 11 then
                                    do
                                        local _ret30
                                        mainStackPointer = mainStackPointer - 1
                                        _ret30 = mainStack[mainStackPointer + 1]
                                    end
                                else
                                    mainStackPointer = mainStackPointer + 1
                                    mainStack[mainStackPointer] = table.new (0, arg1)
                                end
                            end
                        else
                            if op < 14 then
                                if op < 13 then
                                    do
                                        local t, key, value
                                        if arg1 == 1 then
                                            local _ret31
                                            mainStackPointer = mainStackPointer - 1
                                            _ret31 = mainStack[mainStackPointer + 1]
                                            value = _ret31
                                            local _ret32
                                            mainStackPointer = mainStackPointer - 1
                                            _ret32 = mainStack[mainStackPointer + 1]
                                            key = _ret32
                                            local _ret33
                                            mainStackPointer = mainStackPointer - 1
                                            _ret33 = mainStack[mainStackPointer + 1]
                                            t = _ret33
                                        else
                                            local _ret36
                                            mainStackPointer = mainStackPointer - 1
                                            _ret36 = mainStack[mainStackPointer + 1]
                                            goto _inline_end58
                                            ::_inline_end58::
                                            t = _ret36
                                            local _ret35
                                            mainStackPointer = mainStackPointer - 1
                                            _ret35 = mainStack[mainStackPointer + 1]
                                            goto _inline_end57
                                            ::_inline_end57::
                                            key = _ret35
                                            local _ret34
                                            mainStackPointer = mainStackPointer - 1
                                            _ret34 = mainStack[mainStackPointer + 1]
                                            goto _inline_end56
                                            ::_inline_end56::
                                            value = _ret34
                                        end
                                        local meta
                                        key = tonumber (key) or key
                                        if not t.table[key] then
                                            table.insert (t.keys, key)
                                            meta = t.meta.table.setindex
                                            if meta then
                                                t.table[key] = empty
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = t
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = key
                                                mainStackFramesPointer = mainStackFramesPointer + 1
                                                mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = key
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = value
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = t
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = "self"
                                                do
                                                    local _ret37
                                                    _ret37 = mainStackPointer
                                                    local pos = _ret37
                                                    tagStack[pos] = "key"
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = meta
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.TABLE_SET
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 1
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    local _ret38
                                                    _ret38 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret38
                                                end
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    local _ret39
                                                    _ret39 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret39
                                                end
                                            end
                                        end
                                        if not meta then
                                            t.table[key] = value
                                        end
                                    end
                                else
                                    do
                                        local _ret40
                                        mainStackPointer = mainStackPointer - 1
                                        _ret40 = mainStack[mainStackPointer + 1]
                                        local t = _ret40
                                        local _ret41
                                        mainStackPointer = mainStackPointer - 1
                                        _ret41 = mainStack[mainStackPointer + 1]
                                        local key = _ret41
                                        key = tonumber (key) or key
                                        if key == empty then
                                            if arg1 == 1 then
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = empty
                                            else
                                                vmerr = plume.error.cannotUseEmptyAsKey ()
                                            end
                                        else
                                            local _ret44
                                            _ret44 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                                            goto _inline_end112
                                            ::_inline_end112::
                                            local tt = _ret44
                                            if tt ~= "table" then
                                                if arg1 == 1 then
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = empty
                                                else
                                                    vmerr = plume.error.cannotIndexValue (tt)
                                                end
                                            else
                                                local value = t.table[key]
                                                if value ~= nil then
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = value
                                                else
                                                    if arg1 == 1 then
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = empty
                                                    elseif t.meta.table.getindex then
                                                        local meta = t.meta.table.getindex
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = key
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = t
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret42
                                                            _ret42 = mainStackPointer
                                                            local pos = _ret42
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret43
                                                            _ret43 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret43
                                                        end
                                                    else
                                                        if tonumber (key)
                                                         then
                                                            vmerr = plume.error.invalidKey (key)
                                                        else
                                                            vmerr = plume.error.unregisteredKey (key)
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            else
                                if op < 15 then
                                    TABLE_REGISTER_SELF (vm, arg1, arg2)
                                else
                                    do
                                        local _ret45
                                        mainStackPointer = mainStackPointer - 1
                                        _ret45 = mainStack[mainStackPointer + 1]
                                        local t = _ret45
                                        local _ret46
                                        mainStackPointer = mainStackPointer - 1
                                        _ret46 = mainStack[mainStackPointer + 1]
                                        local key = _ret46
                                        local _ret47
                                        mainStackPointer = mainStackPointer - 1
                                        _ret47 = mainStack[mainStackPointer + 1]
                                        local value = _ret47
                                        t.meta.table[key] = value
                                    end
                                end
                            end
                        end
                    end
                else
                    if op < 24 then
                        if op < 20 then
                            if op < 18 then
                                if op < 17 then
                                    do
                                        local _ret48
                                        do
                                            local _ret49
                                            _ret49 = mainStackFrames[mainStackFramesPointer]
                                            local _ret50
                                            _ret50 = mainStack[_ret49 or mainStackPointer]
                                            _ret48 = _ret50
                                            goto _inline_end118
                                        end
                                        ::_inline_end118::
                                        local t = _ret48
                                        local _ret51
                                        mainStackPointer = mainStackPointer - 1
                                        _ret51 = mainStack[mainStackPointer + 1]
                                        table.insert (t, _ret51)
                                        local _ret52
                                        mainStackPointer = mainStackPointer - 1
                                        _ret52 = mainStack[mainStackPointer + 1]
                                        table.insert (t, _ret52)
                                        table.insert (t, arg2 == 1)
                                    end
                                else
                                    do
                                        local _ret53
                                        mainStackPointer = mainStackPointer - 1
                                        _ret53 = mainStack[mainStackPointer + 1]
                                        local t = _ret53
                                        local _ret54
                                        _ret54 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                                        local tt = _ret54
                                        if tt == "table" then
                                            for _, item in ipairs (t.table)
                                             do
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = item
                                            end
                                            for _, key in ipairs (t.keys)
                                             do
                                                if not tonumber (key)
                                                 then
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = t.table[key]
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = key
                                                    do
                                                        local _ret55
                                                        _ret55 = mainStackPointer
                                                        local pos = _ret55
                                                        tagStack[pos] = "key"
                                                    end
                                                end
                                            end
                                        else
                                            vmerr = plume.error.cannotExpandValue (tt)
                                        end
                                    end
                                end
                            else
                                if op < 19 then
                                    do
                                        local _ret56
                                        mainStackPointer = mainStackPointer - 1
                                        _ret56 = mainStack[mainStackPointer + 1]
                                        local t = _ret56
                                        local _ret57
                                        mainStackPointer = mainStackPointer - 1
                                        _ret57 = mainStack[mainStackPointer + 1]
                                        local index = _ret57
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = t
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = "self"
                                        do
                                            local _ret58
                                            _ret58 = mainStackPointer
                                            local pos = _ret58
                                            tagStack[pos] = "key"
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = index
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = t
                                    end
                                else
                                    do
                                        local _ret59
                                        _ret59 = mainStackPointer
                                        local pos = _ret59
                                        tagStack[pos] = "metakey"
                                    end
                                end
                            end
                        else
                            if op < 22 then
                                if op < 21 then
                                    do
                                        local _ret60
                                        _ret60 = mainStackPointer
                                        local pos = _ret60
                                        tagStack[pos] = "key"
                                    end
                                else
                                    do
                                        local _ret61
                                        _ret61 = variableStackPointer
                                        variableStackFramesPointer = variableStackFramesPointer + 1
                                        variableStackFrames[variableStackFramesPointer] = _ret61 + 1 - arg1
                                        for i = 1, arg2 - arg1 do
                                            variableStackPointer = variableStackPointer + 1
                                            variableStack[variableStackPointer] = empty
                                        end
                                    end
                                end
                            else
                                if op < 23 then
                                    do
                                        local _ret62
                                        variableStackFramesPointer = variableStackFramesPointer - 1
                                        _ret62 = variableStackFrames[variableStackFramesPointer + 1]
                                        variableStackPointer = _ret62 - 1
                                    end
                                else
                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                end
                            end
                        end
                    else
                        if op < 28 then
                            if op < 26 then
                                if op < 25 then
                                    local _ret63
                                    do
                                        local _ret64, _ret65, _ret66, _ret67
                                        do
                                            local argsOffset = 1
                                            local _ret68
                                            _ret68 = mainStackFrames[mainStackFramesPointer]
                                            local frameOffset = _ret68
                                            local bufferOffset = frameOffset
                                            local _ret69
                                            _ret69 = mainStackPointer
                                            local mainStackTop = _ret69
                                            local variadicTable
                                            if true then
                                                local max = mainStackTop - bufferOffset + 1
                                                variadicTable = plume.obj.table (max, max / 2)
                                            end
                                            local tomanyPositionnalCounter = 0
                                            local capturedCount = 0
                                            local unknowNamed
                                            while bufferOffset <= mainStackTop do
                                                local tag = tagStack[bufferOffset + 1]
                                                local _ret70
                                                _ret70 = mainStack[bufferOffset or mainStackPointer]
                                                local value = _ret70
                                                if tag == nil then
                                                    if argsOffset <= 0 then
                                                        do
                                                            local _ret71
                                                            _ret71 = variableStackFrames[variableStackFramesPointer or 0]
                                                            variableStack[_ret71 + (argsOffset - 1 or 0)] = value
                                                        end
                                                        capturedCount = capturedCount + 1
                                                    elseif variadicTable then
                                                        local key = #variadicTable.table + 1
                                                        if not variadicTable.table[key] then
                                                            table.insert (variadicTable.keys, key)
                                                        end
                                                        variadicTable.table[key] = value
                                                    else
                                                        tomanyPositionnalCounter = tomanyPositionnalCounter + 1
                                                    end
                                                    argsOffset = argsOffset + 1
                                                else
                                                    bufferOffset = bufferOffset + 1
                                                    local _ret75
                                                    _ret75 = mainStack[bufferOffset or mainStackPointer]
                                                    goto _inline_end169
                                                    ::_inline_end169::
                                                    local key = _ret75
                                                    local argOffset = nil and (nil)[key]
                                                    if argOffset then
                                                        if tag == "key" then
                                                            do
                                                                local _ret72
                                                                _ret72 = variableStackFrames[variableStackFramesPointer or 0]
                                                                variableStack[_ret72 + (argOffset - 1 or 0)] = value
                                                            end
                                                        else
                                                            vmerr = plume.error.cannotUseMetaKey
                                                        end
                                                    else
                                                        if variadicTable then
                                                            if tag == "key" then
                                                                if not variadicTable.table[key] then
                                                                    table.insert (variadicTable.keys, key)
                                                                end
                                                                variadicTable.table[key] = value
                                                            elseif tag == "metakey" then
                                                                local _ret73, _ret74
                                                                do
                                                                    local comopps = "add mul div sub mod pow"
                                                                    local binopps = "eq lt"
                                                                    local unopps = "minus"
                                                                    local expectedParamCount
                                                                    for opp in comopps:gmatch ("%S+")
                                                                     do
                                                                        if key == opp then
                                                                            expectedParamCount = 2
                                                                        elseif key:match ("^" .. opp .. "[rl]")
                                                                             then
                                                                            expectedParamCount = 1
                                                                        end
                                                                    end
                                                                    for opp in binopps:gmatch ("%S+")
                                                                     do
                                                                        if key == opp then
                                                                            expectedParamCount = 2
                                                                        end
                                                                    end
                                                                    for opp in unopps:gmatch ("%S+")
                                                                     do
                                                                        if key == opp then
                                                                            expectedParamCount = 0
                                                                        end
                                                                    end
                                                                    if expectedParamCount then
                                                                        if value.positionalParamCount ~= expectedParamCount then
                                                                            _ret73, _ret74 = false, "Wrong number of positionnal parameters for meta-macro '" .. key .. "', " .. value.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                                            goto _inline_end167
                                                                        end
                                                                        if value.namedParamCount > 1 then
                                                                            _ret73, _ret74 = false, "Meta-macro '" .. key .. "' dont support named parameters."
                                                                            goto _inline_end167
                                                                        end
                                                                    elseif key ~= "call" and key ~= "tostring" and key ~= "getindex" and key ~= "setindex" and key ~= "next" and key ~= "iter" then
                                                                        _ret73, _ret74 = false, "'" .. key .. "' isn't a valid meta-macro name."
                                                                        goto _inline_end167
                                                                    end
                                                                    _ret73, _ret74 = true
                                                                    goto _inline_end167
                                                                end
                                                                ::_inline_end167::
                                                                local success, err = _ret73, _ret74
                                                                if success then
                                                                    variadicTable.meta.table[key] = value
                                                                else
                                                                    vmerr = err
                                                                end
                                                            end
                                                        else
                                                            unknowNamed = key
                                                            break
                                                        end
                                                    end
                                                    tagStack[bufferOffset] = nil
                                                end
                                                bufferOffset = bufferOffset + 1
                                            end
                                            _ret64, _ret65, _ret66, _ret67 = variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed
                                            goto _inline_end156
                                        end
                                        ::_inline_end156::
                                        local resultTable = _ret64, _ret65, _ret66, _ret67
                                        do
                                            local _ret76
                                            mainStackFramesPointer = mainStackFramesPointer - 1
                                            _ret76 = mainStackFrames[mainStackFramesPointer + 1]
                                            mainStackPointer = _ret76 - 1
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = resultTable
                                        _ret63 = resultTable
                                        goto _inline_end155
                                    end
                                    ::_inline_end155::
                                else
                                    do
                                        local _ret77
                                        _ret77 = mainStackFrames[mainStackFramesPointer]
                                        local start = _ret77
                                        local _ret78
                                        _ret78 = mainStackPointer
                                        local stop = _ret78
                                        for i = start, stop do
                                            local _ret79
                                            _ret79 = mainStack[i or mainStackPointer]
                                            if _ret79 == empty then
                                                mainStack[i] = ""
                                            end
                                        end
                                        local acc_text = table.concat (mainStack, "", start, stop)
                                        mainStackPointer = start
                                        mainStack[start] = acc_text
                                        do
                                            local _ret80
                                            mainStackFramesPointer = mainStackFramesPointer - 1
                                            _ret80 = mainStackFrames[mainStackFramesPointer + 1]
                                        end
                                    end
                                end
                            else
                                if op < 27 then
                                    do
                                        local _ret81
                                        mainStackPointer = mainStackPointer - 1
                                        _ret81 = mainStack[mainStackPointer + 1]
                                        local tocall = _ret81
                                        local _ret82
                                        _ret82 = type (tocall) == "table" and (tocall == empty or tocall.type) or (type (tocall) == "cdata" and tocall.type) or type (tocall)
                                        local t = _ret82
                                        local self
                                        if t == "table" then
                                            if tocall.meta and tocall.meta.table.call then
                                                self = tocall
                                                tocall = tocall.meta.table.call
                                                t = tocall.type
                                            end
                                        end
                                        if t == "macro" then
                                            if self then
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = self
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = "self"
                                                do
                                                    local _ret83
                                                    _ret83 = mainStackPointer
                                                    local pos = _ret83
                                                    tagStack[pos] = "key"
                                                end
                                            end
                                            do
                                                local allocationCount = tocall.positionalParamCount + tocall.namedParamCount
                                                if tocall.variadicOffset then
                                                    allocationCount = allocationCount + 1
                                                end
                                                do
                                                    local _ret84
                                                    _ret84 = variableStackPointer
                                                    variableStackFramesPointer = variableStackFramesPointer + 1
                                                    variableStackFrames[variableStackFramesPointer] = _ret84 + 1
                                                    for i = 1, tocall.localsCount do
                                                        variableStackPointer = variableStackPointer + 1
                                                        variableStack[variableStackPointer] = empty
                                                    end
                                                end
                                                local _ret85, _ret86, _ret87, _ret88
                                                do
                                                    local argsOffset = 1
                                                    local _ret89
                                                    _ret89 = mainStackFrames[mainStackFramesPointer]
                                                    local frameOffset = _ret89
                                                    local bufferOffset = frameOffset
                                                    local _ret90
                                                    _ret90 = mainStackPointer
                                                    local mainStackTop = _ret90
                                                    local variadicTable
                                                    if tocall.variadicOffset then
                                                        local max = mainStackTop - bufferOffset + 1
                                                        variadicTable = plume.obj.table (max, max / 2)
                                                    end
                                                    local tomanyPositionnalCounter = 0
                                                    local capturedCount = 0
                                                    local unknowNamed
                                                    while bufferOffset <= mainStackTop do
                                                        local tag = tagStack[bufferOffset + 1]
                                                        local _ret91
                                                        _ret91 = mainStack[bufferOffset or mainStackPointer]
                                                        local value = _ret91
                                                        if tag == nil then
                                                            if argsOffset <= tocall.positionalParamCount then
                                                                do
                                                                    local _ret92
                                                                    _ret92 = variableStackFrames[variableStackFramesPointer or 0]
                                                                    variableStack[_ret92 + (argsOffset - 1 or 0)] = value
                                                                end
                                                                capturedCount = capturedCount + 1
                                                            elseif variadicTable then
                                                                local key = #variadicTable.table + 1
                                                                if not variadicTable.table[key] then
                                                                    table.insert (variadicTable.keys, key)
                                                                end
                                                                variadicTable.table[key] = value
                                                            else
                                                                tomanyPositionnalCounter = tomanyPositionnalCounter + 1
                                                            end
                                                            argsOffset = argsOffset + 1
                                                        else
                                                            bufferOffset = bufferOffset + 1
                                                            local _ret96
                                                            _ret96 = mainStack[bufferOffset or mainStackPointer]
                                                            goto _inline_end209
                                                            ::_inline_end209::
                                                            local key = _ret96
                                                            local argOffset = tocall.namedParamOffset and (tocall.namedParamOffset)[key]
                                                            if argOffset then
                                                                if tag == "key" then
                                                                    do
                                                                        local _ret93
                                                                        _ret93 = variableStackFrames[variableStackFramesPointer or 0]
                                                                        variableStack[_ret93 + (argOffset - 1 or 0)] = value
                                                                    end
                                                                else
                                                                    vmerr = plume.error.cannotUseMetaKey
                                                                end
                                                            else
                                                                if variadicTable then
                                                                    if tag == "key" then
                                                                        if not variadicTable.table[key] then
                                                                            table.insert (variadicTable.keys, key)
                                                                        end
                                                                        variadicTable.table[key] = value
                                                                    elseif tag == "metakey" then
                                                                        local _ret94, _ret95
                                                                        do
                                                                            local comopps = "add mul div sub mod pow"
                                                                            local binopps = "eq lt"
                                                                            local unopps = "minus"
                                                                            local expectedParamCount
                                                                            for opp in comopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                elseif key:match ("^" .. opp .. "[rl]")
                                                                                     then
                                                                                    expectedParamCount = 1
                                                                                end
                                                                            end
                                                                            for opp in binopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                end
                                                                            end
                                                                            for opp in unopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 0
                                                                                end
                                                                            end
                                                                            if expectedParamCount then
                                                                                if value.positionalParamCount ~= expectedParamCount then
                                                                                    _ret94, _ret95 = false, "Wrong number of positionnal parameters for meta-macro '" .. key .. "', " .. value.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                                                    goto _inline_end207
                                                                                end
                                                                                if value.namedParamCount > 1 then
                                                                                    _ret94, _ret95 = false, "Meta-macro '" .. key .. "' dont support named parameters."
                                                                                    goto _inline_end207
                                                                                end
                                                                            elseif key ~= "call" and key ~= "tostring" and key ~= "getindex" and key ~= "setindex" and key ~= "next" and key ~= "iter" then
                                                                                _ret94, _ret95 = false, "'" .. key .. "' isn't a valid meta-macro name."
                                                                                goto _inline_end207
                                                                            end
                                                                            _ret94, _ret95 = true
                                                                            goto _inline_end207
                                                                        end
                                                                        ::_inline_end207::
                                                                        local success, err = _ret94, _ret95
                                                                        if success then
                                                                            variadicTable.meta.table[key] = value
                                                                        else
                                                                            vmerr = err
                                                                        end
                                                                    end
                                                                else
                                                                    unknowNamed = key
                                                                    break
                                                                end
                                                            end
                                                            tagStack[bufferOffset] = nil
                                                        end
                                                        bufferOffset = bufferOffset + 1
                                                    end
                                                    _ret85, _ret86, _ret87, _ret88 = variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed
                                                    goto _inline_end196
                                                end
                                                ::_inline_end196::
                                                local variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed = _ret85, _ret86, _ret87, _ret88
                                                if tomanyPositionnalCounter > 0 then
                                                    vmerr = plume.error.wrongArgsCount (tocall.name, tocall.positionalParamCount + tomanyPositionnalCounter, tocall.positionalParamCount)
                                                elseif capturedCount < tocall.positionalParamCount then
                                                    vmerr = plume.error.wrongArgsCount (tocall.name, capturedCount, tocall.positionalParamCount)
                                                elseif unknowNamed then
                                                    vmerr = plume.error.unknowParameter (unknowNamed, tocall.name)
                                                else
                                                    if tocall.variadicOffset then
                                                        do
                                                            local _ret98
                                                            _ret98 = variableStackFrames[variableStackFramesPointer or 0]
                                                            variableStack[_ret98 + (tocall.variadicOffset - 1 or 0)] = variadicTable
                                                        end
                                                    end
                                                    table.insert (runtime.callstack, {macro = tocall, ip = ip})
                                                    if #runtime.callstack <= 1000 then
                                                        do
                                                            local _ret97
                                                            mainStackFramesPointer = mainStackFramesPointer - 1
                                                            _ret97 = mainStackFrames[mainStackFramesPointer + 1]
                                                            mainStackPointer = _ret97 - 1
                                                        end
                                                        macroStackPointer = macroStackPointer + 1
                                                        macroStack[macroStackPointer] = ip + 1
                                                        jump = tocall.offset
                                                    else
                                                        vmerr = plume.error.stackOverflow ()
                                                    end
                                                end
                                            end
                                        elseif t == "luaFunction" then
                                            local _ret131
                                            do
                                                local _ret132, _ret133, _ret134, _ret135
                                                do
                                                    local argsOffset = 1
                                                    local _ret136
                                                    _ret136 = mainStackFrames[mainStackFramesPointer]
                                                    local frameOffset = _ret136
                                                    local bufferOffset = frameOffset
                                                    local _ret137
                                                    _ret137 = mainStackPointer
                                                    local mainStackTop = _ret137
                                                    local variadicTable
                                                    if true then
                                                        local max = mainStackTop - bufferOffset + 1
                                                        variadicTable = plume.obj.table (max, max / 2)
                                                    end
                                                    local tomanyPositionnalCounter = 0
                                                    local capturedCount = 0
                                                    local unknowNamed
                                                    while bufferOffset <= mainStackTop do
                                                        local tag = tagStack[bufferOffset + 1]
                                                        local _ret138
                                                        _ret138 = mainStack[bufferOffset or mainStackPointer]
                                                        local value = _ret138
                                                        if tag == nil then
                                                            if argsOffset <= 0 then
                                                                do
                                                                    local _ret139
                                                                    _ret139 = variableStackFrames[variableStackFramesPointer or 0]
                                                                    variableStack[_ret139 + (argsOffset - 1 or 0)] = value
                                                                end
                                                                capturedCount = capturedCount + 1
                                                            elseif variadicTable then
                                                                local key = #variadicTable.table + 1
                                                                if not variadicTable.table[key] then
                                                                    table.insert (variadicTable.keys, key)
                                                                end
                                                                variadicTable.table[key] = value
                                                            else
                                                                tomanyPositionnalCounter = tomanyPositionnalCounter + 1
                                                            end
                                                            argsOffset = argsOffset + 1
                                                        else
                                                            bufferOffset = bufferOffset + 1
                                                            local _ret143
                                                            _ret143 = mainStack[bufferOffset or mainStackPointer]
                                                            goto _inline_end292
                                                            ::_inline_end292::
                                                            local key = _ret143
                                                            local argOffset = nil and (nil)[key]
                                                            if argOffset then
                                                                if tag == "key" then
                                                                    do
                                                                        local _ret140
                                                                        _ret140 = variableStackFrames[variableStackFramesPointer or 0]
                                                                        variableStack[_ret140 + (argOffset - 1 or 0)] = value
                                                                    end
                                                                else
                                                                    vmerr = plume.error.cannotUseMetaKey
                                                                end
                                                            else
                                                                if variadicTable then
                                                                    if tag == "key" then
                                                                        if not variadicTable.table[key] then
                                                                            table.insert (variadicTable.keys, key)
                                                                        end
                                                                        variadicTable.table[key] = value
                                                                    elseif tag == "metakey" then
                                                                        local _ret141, _ret142
                                                                        do
                                                                            local comopps = "add mul div sub mod pow"
                                                                            local binopps = "eq lt"
                                                                            local unopps = "minus"
                                                                            local expectedParamCount
                                                                            for opp in comopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                elseif key:match ("^" .. opp .. "[rl]")
                                                                                     then
                                                                                    expectedParamCount = 1
                                                                                end
                                                                            end
                                                                            for opp in binopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                end
                                                                            end
                                                                            for opp in unopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 0
                                                                                end
                                                                            end
                                                                            if expectedParamCount then
                                                                                if value.positionalParamCount ~= expectedParamCount then
                                                                                    _ret141, _ret142 = false, "Wrong number of positionnal parameters for meta-macro '" .. key .. "', " .. value.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                                                    goto _inline_end290
                                                                                end
                                                                                if value.namedParamCount > 1 then
                                                                                    _ret141, _ret142 = false, "Meta-macro '" .. key .. "' dont support named parameters."
                                                                                    goto _inline_end290
                                                                                end
                                                                            elseif key ~= "call" and key ~= "tostring" and key ~= "getindex" and key ~= "setindex" and key ~= "next" and key ~= "iter" then
                                                                                _ret141, _ret142 = false, "'" .. key .. "' isn't a valid meta-macro name."
                                                                                goto _inline_end290
                                                                            end
                                                                            _ret141, _ret142 = true
                                                                            goto _inline_end290
                                                                        end
                                                                        ::_inline_end290::
                                                                        local success, err = _ret141, _ret142
                                                                        if success then
                                                                            variadicTable.meta.table[key] = value
                                                                        else
                                                                            vmerr = err
                                                                        end
                                                                    end
                                                                else
                                                                    unknowNamed = key
                                                                    break
                                                                end
                                                            end
                                                            tagStack[bufferOffset] = nil
                                                        end
                                                        bufferOffset = bufferOffset + 1
                                                    end
                                                    _ret132, _ret133, _ret134, _ret135 = variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed
                                                    goto _inline_end279
                                                end
                                                ::_inline_end279::
                                                local resultTable = _ret132, _ret133, _ret134, _ret135
                                                do
                                                    local _ret144
                                                    mainStackFramesPointer = mainStackFramesPointer - 1
                                                    _ret144 = mainStackFrames[mainStackFramesPointer + 1]
                                                    mainStackPointer = _ret144 - 1
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = resultTable
                                                _ret131 = resultTable
                                                goto _inline_end278
                                            end
                                            ::_inline_end278::
                                            table.insert (runtime.callstack, {runtime = runtime, macro = tocall, ip = ip})
                                            local _ret145
                                            _ret145 = fileStack[fileStackPointer]
                                            local _ret146
                                            mainStackPointer = mainStackPointer - 1
                                            _ret146 = mainStack[mainStackPointer + 1]
                                            local success, result = pcall (tocall.callable, _ret146, runtime, _ret145)
                                            if success then
                                                table.remove (runtime.callstack)
                                                if result == nil then
                                                    result = empty
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            else
                                                vmerr = result
                                            end
                                        elseif t == "luaStdFunction" then
                                            local _ret116
                                            do
                                                local _ret117, _ret118, _ret119, _ret120
                                                do
                                                    local argsOffset = 1
                                                    local _ret121
                                                    _ret121 = mainStackFrames[mainStackFramesPointer]
                                                    local frameOffset = _ret121
                                                    local bufferOffset = frameOffset
                                                    local _ret122
                                                    _ret122 = mainStackPointer
                                                    local mainStackTop = _ret122
                                                    local variadicTable
                                                    if true then
                                                        local max = mainStackTop - bufferOffset + 1
                                                        variadicTable = plume.obj.table (max, max / 2)
                                                    end
                                                    local tomanyPositionnalCounter = 0
                                                    local capturedCount = 0
                                                    local unknowNamed
                                                    while bufferOffset <= mainStackTop do
                                                        local tag = tagStack[bufferOffset + 1]
                                                        local _ret123
                                                        _ret123 = mainStack[bufferOffset or mainStackPointer]
                                                        local value = _ret123
                                                        if tag == nil then
                                                            if argsOffset <= 0 then
                                                                do
                                                                    local _ret124
                                                                    _ret124 = variableStackFrames[variableStackFramesPointer or 0]
                                                                    variableStack[_ret124 + (argsOffset - 1 or 0)] = value
                                                                end
                                                                capturedCount = capturedCount + 1
                                                            elseif variadicTable then
                                                                local key = #variadicTable.table + 1
                                                                if not variadicTable.table[key] then
                                                                    table.insert (variadicTable.keys, key)
                                                                end
                                                                variadicTable.table[key] = value
                                                            else
                                                                tomanyPositionnalCounter = tomanyPositionnalCounter + 1
                                                            end
                                                            argsOffset = argsOffset + 1
                                                        else
                                                            bufferOffset = bufferOffset + 1
                                                            local _ret128
                                                            _ret128 = mainStack[bufferOffset or mainStackPointer]
                                                            goto _inline_end266
                                                            ::_inline_end266::
                                                            local key = _ret128
                                                            local argOffset = nil and (nil)[key]
                                                            if argOffset then
                                                                if tag == "key" then
                                                                    do
                                                                        local _ret125
                                                                        _ret125 = variableStackFrames[variableStackFramesPointer or 0]
                                                                        variableStack[_ret125 + (argOffset - 1 or 0)] = value
                                                                    end
                                                                else
                                                                    vmerr = plume.error.cannotUseMetaKey
                                                                end
                                                            else
                                                                if variadicTable then
                                                                    if tag == "key" then
                                                                        if not variadicTable.table[key] then
                                                                            table.insert (variadicTable.keys, key)
                                                                        end
                                                                        variadicTable.table[key] = value
                                                                    elseif tag == "metakey" then
                                                                        local _ret126, _ret127
                                                                        do
                                                                            local comopps = "add mul div sub mod pow"
                                                                            local binopps = "eq lt"
                                                                            local unopps = "minus"
                                                                            local expectedParamCount
                                                                            for opp in comopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                elseif key:match ("^" .. opp .. "[rl]")
                                                                                     then
                                                                                    expectedParamCount = 1
                                                                                end
                                                                            end
                                                                            for opp in binopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                end
                                                                            end
                                                                            for opp in unopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 0
                                                                                end
                                                                            end
                                                                            if expectedParamCount then
                                                                                if value.positionalParamCount ~= expectedParamCount then
                                                                                    _ret126, _ret127 = false, "Wrong number of positionnal parameters for meta-macro '" .. key .. "', " .. value.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                                                    goto _inline_end264
                                                                                end
                                                                                if value.namedParamCount > 1 then
                                                                                    _ret126, _ret127 = false, "Meta-macro '" .. key .. "' dont support named parameters."
                                                                                    goto _inline_end264
                                                                                end
                                                                            elseif key ~= "call" and key ~= "tostring" and key ~= "getindex" and key ~= "setindex" and key ~= "next" and key ~= "iter" then
                                                                                _ret126, _ret127 = false, "'" .. key .. "' isn't a valid meta-macro name."
                                                                                goto _inline_end264
                                                                            end
                                                                            _ret126, _ret127 = true
                                                                            goto _inline_end264
                                                                        end
                                                                        ::_inline_end264::
                                                                        local success, err = _ret126, _ret127
                                                                        if success then
                                                                            variadicTable.meta.table[key] = value
                                                                        else
                                                                            vmerr = err
                                                                        end
                                                                    end
                                                                else
                                                                    unknowNamed = key
                                                                    break
                                                                end
                                                            end
                                                            tagStack[bufferOffset] = nil
                                                        end
                                                        bufferOffset = bufferOffset + 1
                                                    end
                                                    _ret117, _ret118, _ret119, _ret120 = variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed
                                                    goto _inline_end253
                                                end
                                                ::_inline_end253::
                                                local resultTable = _ret117, _ret118, _ret119, _ret120
                                                do
                                                    local _ret129
                                                    mainStackFramesPointer = mainStackFramesPointer - 1
                                                    _ret129 = mainStackFrames[mainStackFramesPointer + 1]
                                                    mainStackPointer = _ret129 - 1
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = resultTable
                                                _ret116 = resultTable
                                                goto _inline_end252
                                            end
                                            ::_inline_end252::
                                            local args = _ret116
                                            if #args.table < tocall.minArgs or #args.table > tocall.maxArgs then
                                                vmerr = plume.error.wrongArgsCountStd (tocall.name, #args.table, tocall.minArgs, tocall.maxArgs)
                                            end
                                            do
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = tocall.opcode
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                local _ret130
                                                _ret130 = macroStackPointer
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = _ret130
                                            end
                                        elseif tocall == plume.std.table then
                                            local _ret102
                                            do
                                                local _ret103, _ret104, _ret105, _ret106
                                                do
                                                    local argsOffset = 1
                                                    local _ret107
                                                    _ret107 = mainStackFrames[mainStackFramesPointer]
                                                    local frameOffset = _ret107
                                                    local bufferOffset = frameOffset
                                                    local _ret108
                                                    _ret108 = mainStackPointer
                                                    local mainStackTop = _ret108
                                                    local variadicTable
                                                    if true then
                                                        local max = mainStackTop - bufferOffset + 1
                                                        variadicTable = plume.obj.table (max, max / 2)
                                                    end
                                                    local tomanyPositionnalCounter = 0
                                                    local capturedCount = 0
                                                    local unknowNamed
                                                    while bufferOffset <= mainStackTop do
                                                        local tag = tagStack[bufferOffset + 1]
                                                        local _ret109
                                                        _ret109 = mainStack[bufferOffset or mainStackPointer]
                                                        local value = _ret109
                                                        if tag == nil then
                                                            if argsOffset <= 0 then
                                                                do
                                                                    local _ret110
                                                                    _ret110 = variableStackFrames[variableStackFramesPointer or 0]
                                                                    variableStack[_ret110 + (argsOffset - 1 or 0)] = value
                                                                end
                                                                capturedCount = capturedCount + 1
                                                            elseif variadicTable then
                                                                local key = #variadicTable.table + 1
                                                                if not variadicTable.table[key] then
                                                                    table.insert (variadicTable.keys, key)
                                                                end
                                                                variadicTable.table[key] = value
                                                            else
                                                                tomanyPositionnalCounter = tomanyPositionnalCounter + 1
                                                            end
                                                            argsOffset = argsOffset + 1
                                                        else
                                                            bufferOffset = bufferOffset + 1
                                                            local _ret114
                                                            _ret114 = mainStack[bufferOffset or mainStackPointer]
                                                            goto _inline_end247
                                                            ::_inline_end247::
                                                            local key = _ret114
                                                            local argOffset = nil and (nil)[key]
                                                            if argOffset then
                                                                if tag == "key" then
                                                                    do
                                                                        local _ret111
                                                                        _ret111 = variableStackFrames[variableStackFramesPointer or 0]
                                                                        variableStack[_ret111 + (argOffset - 1 or 0)] = value
                                                                    end
                                                                else
                                                                    vmerr = plume.error.cannotUseMetaKey
                                                                end
                                                            else
                                                                if variadicTable then
                                                                    if tag == "key" then
                                                                        if not variadicTable.table[key] then
                                                                            table.insert (variadicTable.keys, key)
                                                                        end
                                                                        variadicTable.table[key] = value
                                                                    elseif tag == "metakey" then
                                                                        local _ret112, _ret113
                                                                        do
                                                                            local comopps = "add mul div sub mod pow"
                                                                            local binopps = "eq lt"
                                                                            local unopps = "minus"
                                                                            local expectedParamCount
                                                                            for opp in comopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                elseif key:match ("^" .. opp .. "[rl]")
                                                                                     then
                                                                                    expectedParamCount = 1
                                                                                end
                                                                            end
                                                                            for opp in binopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 2
                                                                                end
                                                                            end
                                                                            for opp in unopps:gmatch ("%S+")
                                                                             do
                                                                                if key == opp then
                                                                                    expectedParamCount = 0
                                                                                end
                                                                            end
                                                                            if expectedParamCount then
                                                                                if value.positionalParamCount ~= expectedParamCount then
                                                                                    _ret112, _ret113 = false, "Wrong number of positionnal parameters for meta-macro '" .. key .. "', " .. value.positionalParamCount .. " instead of " .. expectedParamCount .. "."
                                                                                    goto _inline_end245
                                                                                end
                                                                                if value.namedParamCount > 1 then
                                                                                    _ret112, _ret113 = false, "Meta-macro '" .. key .. "' dont support named parameters."
                                                                                    goto _inline_end245
                                                                                end
                                                                            elseif key ~= "call" and key ~= "tostring" and key ~= "getindex" and key ~= "setindex" and key ~= "next" and key ~= "iter" then
                                                                                _ret112, _ret113 = false, "'" .. key .. "' isn't a valid meta-macro name."
                                                                                goto _inline_end245
                                                                            end
                                                                            _ret112, _ret113 = true
                                                                            goto _inline_end245
                                                                        end
                                                                        ::_inline_end245::
                                                                        local success, err = _ret112, _ret113
                                                                        if success then
                                                                            variadicTable.meta.table[key] = value
                                                                        else
                                                                            vmerr = err
                                                                        end
                                                                    end
                                                                else
                                                                    unknowNamed = key
                                                                    break
                                                                end
                                                            end
                                                            tagStack[bufferOffset] = nil
                                                        end
                                                        bufferOffset = bufferOffset + 1
                                                    end
                                                    _ret103, _ret104, _ret105, _ret106 = variadicTable, tomanyPositionnalCounter, capturedCount, unknowNamed
                                                    goto _inline_end234
                                                end
                                                ::_inline_end234::
                                                local resultTable = _ret103, _ret104, _ret105, _ret106
                                                do
                                                    local _ret115
                                                    mainStackFramesPointer = mainStackFramesPointer - 1
                                                    _ret115 = mainStackFrames[mainStackFramesPointer + 1]
                                                    mainStackPointer = _ret115 - 1
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = resultTable
                                                _ret102 = resultTable
                                                goto _inline_end233
                                            end
                                            ::_inline_end233::
                                        elseif tocall == plume.std.tostring then
                                            local _ret99
                                            mainStackPointer = mainStackPointer - 1
                                            _ret99 = mainStack[mainStackPointer + 1]
                                            local value = _ret99
                                            do
                                                local _ret100
                                                mainStackFramesPointer = mainStackFramesPointer - 1
                                                _ret100 = mainStackFrames[mainStackFramesPointer + 1]
                                                mainStackPointer = _ret100 - 1
                                            end
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = value
                                            do
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = plume.ops.CHECK_IS_TEXT
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                local _ret101
                                                _ret101 = macroStackPointer
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = _ret101
                                            end
                                        else
                                            vmerr = plume.error.cannotCallValue (t)
                                        end
                                    end
                                else
                                    do
                                        local _ret147
                                        _ret147 = mainStack[mainStackPointer]
                                        local value = _ret147
                                        local _ret148
                                        _ret148 = type (value) == "table" and (value == empty or value.type) or (type (value) == "cdata" and value.type) or type (value)
                                        local t = _ret148
                                        if t ~= "number" and t ~= "string" and value ~= empty then
                                            local meta = t == "table" and value.meta.table.tostring
                                            if meta then
                                                local _ret149
                                                mainStackPointer = mainStackPointer - 1
                                                _ret149 = mainStack[mainStackPointer + 1]
                                                mainStackFramesPointer = mainStackFramesPointer + 1
                                                mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = t
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = "self"
                                                do
                                                    local _ret150
                                                    _ret150 = mainStackPointer
                                                    local pos = _ret150
                                                    tagStack[pos] = "key"
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = meta
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    local _ret151
                                                    _ret151 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret151
                                                end
                                            elseif t == "boolean" then
                                                local _ret152
                                                _ret152 = mainStackPointer
                                                mainStack[_ret152] = tostring (value)
                                            else
                                                vmerr = plume.error.cannotConcatValue (t)
                                            end
                                        end
                                    end
                                end
                            end
                        else
                            if op < 30 then
                                if op < 29 then
                                    do
                                        local _ret153
                                        mainStackPointer = mainStackPointer - 1
                                        _ret153 = mainStack[mainStackPointer + 1]
                                        local test = _ret153
                                        local _ret154
                                        if test == empty then
                                            _ret154 = false
                                            goto _inline_end325
                                        end
                                        _ret154 = test
                                        ::_inline_end325::
                                        if _ret154 then
                                            jump = arg2
                                        end
                                    end
                                else
                                    do
                                        local _ret155
                                        mainStackPointer = mainStackPointer - 1
                                        _ret155 = mainStack[mainStackPointer + 1]
                                        local test = _ret155
                                        local _ret156
                                        if test == empty then
                                            _ret156 = false
                                            goto _inline_end328
                                        end
                                        _ret156 = test
                                        ::_inline_end328::
                                        if not _ret156 then
                                            jump = arg2
                                        end
                                    end
                                end
                            else
                                if op < 31 then
                                    do
                                        local _ret157
                                        mainStackPointer = mainStackPointer - 1
                                        _ret157 = mainStack[mainStackPointer + 1]
                                        local test = _ret157
                                        if test ~= empty then
                                            jump = arg2
                                        end
                                    end
                                else
                                    do
                                        local _ret158
                                        _ret158 = mainStack[mainStackPointer]
                                        local test = _ret158
                                        local _ret160
                                        if test == empty then
                                            _ret160 = false
                                            goto _inline_end335
                                        end
                                        _ret160 = test
                                        ::_inline_end335::
                                        if not _ret160 then
                                            local _ret159
                                            mainStackPointer = mainStackPointer - 1
                                            _ret159 = mainStack[mainStackPointer + 1]
                                            jump = arg2
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            else
                if op < 48 then
                    if op < 40 then
                        if op < 36 then
                            if op < 34 then
                                if op < 33 then
                                    jump = arg2
                                else
                                    do
                                        local _ret161
                                        _ret161 = mainStack[mainStackPointer]
                                        local test = _ret161
                                        local _ret162
                                        if test == empty then
                                            _ret162 = false
                                            goto _inline_end339
                                        end
                                        _ret162 = test
                                        ::_inline_end339::
                                        if _ret162 then
                                            jump = arg2
                                        end
                                    end
                                end
                            else
                                if op < 35 then
                                    do
                                        local _ret163
                                        _ret163 = mainStack[mainStackPointer]
                                        local test = _ret163
                                        local _ret164
                                        if test == empty then
                                            _ret164 = false
                                            goto _inline_end342
                                        end
                                        _ret164 = test
                                        ::_inline_end342::
                                        if not _ret164 then
                                            jump = arg2
                                        end
                                    end
                                else
                                    do
                                        local _ret165
                                        mainStackPointer = mainStackPointer - 1
                                        _ret165 = mainStack[mainStackPointer + 1]
                                        local obj = _ret165
                                        local _ret166
                                        _ret166 = type (obj) == "table" and (obj == empty or obj.type) or (type (obj) == "cdata" and obj.type) or type (obj)
                                        local tobj = _ret166
                                        local iter, value, flag, macrocall
                                        local start = 0
                                        if tobj == "table" then
                                            if obj.meta.table.next then
                                                iter = obj
                                            else
                                                iter = obj.meta.table.iter
                                            end
                                            if iter then
                                                if iter.type == "luaFunction" then
                                                    value = iter.callable ({obj})
                                                elseif iter.type == "table" then
                                                    value = iter
                                                elseif iter.type == "macro" then
                                                    macrocall = true
                                                end
                                            else
                                                value = obj.table
                                                flag = ITER_TABLE
                                            end
                                        elseif tobj == "stdIterator" then
                                            value = obj
                                            flag = obj.flag
                                            start = obj.start or start
                                        else
                                            vmerr = plume.error.cannotIterateValue (tobj)
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = flag
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = start
                                        if macrocall then
                                            mainStackFramesPointer = mainStackFramesPointer + 1
                                            mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = obj
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = "self"
                                            do
                                                local _ret167
                                                _ret167 = mainStackPointer
                                                local pos = _ret167
                                                tagStack[pos] = "key"
                                            end
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = iter
                                            do
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                local _ret168
                                                _ret168 = macroStackPointer
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = _ret168
                                            end
                                        else
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = value
                                        end
                                    end
                                end
                            end
                        else
                            if op < 38 then
                                if op < 37 then
                                    do
                                        local _ret169
                                        do
                                            local _ret170
                                            _ret170 = variableStackFrames[variableStackFramesPointer]
                                            local _ret171
                                            _ret171 = variableStack[_ret170 or variableStackPointer]
                                            _ret169 = _ret171
                                            goto _inline_end365
                                        end
                                        ::_inline_end365::
                                        local obj = _ret169
                                        local _ret172
                                        do
                                            local _ret173
                                            _ret173 = variableStackFrames[variableStackFramesPointer]
                                            local _ret174
                                            _ret174 = variableStack[_ret173 + 1 or variableStackPointer]
                                            _ret172 = _ret174
                                            goto _inline_end368
                                        end
                                        ::_inline_end368::
                                        local state = _ret172
                                        local _ret175
                                        do
                                            local _ret176
                                            _ret176 = variableStackFrames[variableStackFramesPointer]
                                            local _ret177
                                            _ret177 = variableStack[_ret176 + 2 or variableStackPointer]
                                            _ret175 = _ret177
                                            goto _inline_end371
                                        end
                                        ::_inline_end371::
                                        local flag = _ret175
                                        local result, call
                                        if flag == ITER_TABLE then
                                            state = state + 1
                                            if state > #obj then
                                                result = empty
                                            else
                                                result = obj[state]
                                            end
                                        elseif flag == ITER_SEQ then
                                            state = state + obj.step
                                            if state > obj.stop then
                                                result = empty
                                            else
                                                result = state
                                            end
                                        elseif flag == ITER_ENUMS then
                                            state = state + 1
                                            if state > #obj.ref.table then
                                                result = empty
                                            else
                                                if obj.legacy then
                                                    result = plume.obj.table (0, 2)
                                                    result.table.index = state
                                                    result.table.value = obj.ref.table[state]
                                                    result.keys = {"index", "value"}
                                                else
                                                    result = plume.obj.table (2, 0)
                                                    result.table[1] = state
                                                    result.table[2] = obj.ref.table[state]
                                                end
                                            end
                                        elseif flag == ITER_ITEMS then
                                            state = state + 1
                                            if obj.named then
                                                while tonumber (obj.ref.keys[state])
                                                 do
                                                    state = state + 1
                                                end
                                            end
                                            if state > #obj.ref.keys then
                                                result = empty
                                            else
                                                if obj.legacy then
                                                    result = plume.obj.table (0, 2)
                                                    result.table.key = obj.ref.keys[state]
                                                    result.table.value = obj.ref.table[result.table.key]
                                                    result.keys = {"key", "value"}
                                                else
                                                    result = plume.obj.table (2, 0)
                                                    result.table[1] = obj.ref.keys[state]
                                                    result.table[2] = obj.ref.table[result.table[1]]
                                                end
                                            end
                                        else
                                            local iter = obj.meta.table.next
                                            if iter.type == "luaFunction" then
                                                result = iter.callable ()
                                            else
                                                call = true
                                                mainStackFramesPointer = mainStackFramesPointer + 1
                                                mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = obj
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = "self"
                                                do
                                                    local _ret180
                                                    _ret180 = mainStackPointer
                                                    local pos = _ret180
                                                    tagStack[pos] = "key"
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = iter
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.JUMP_FOR
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = arg2
                                                    local _ret179
                                                    _ret179 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret179
                                                end
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    local _ret178
                                                    _ret178 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret178
                                                end
                                            end
                                        end
                                        if not call then
                                            do
                                                local _ret181
                                                _ret181 = variableStackFrames[variableStackFramesPointer or 0]
                                                variableStack[_ret181 + 1] = state
                                            end
                                            if result == empty then
                                                jump = arg2
                                            else
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                else
                                    do
                                        local _ret182
                                        mainStackPointer = mainStackPointer - 1
                                        _ret182 = mainStack[mainStackPointer + 1]
                                        local right = _ret182
                                        local _ret183
                                        mainStackPointer = mainStackPointer - 1
                                        _ret183 = mainStack[mainStackPointer + 1]
                                        local left = _ret183
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret184
                                            _ret184 = leftNumber + rightNumber
                                            result = _ret184
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret194, _ret195
                                            do
                                                local _ret196
                                                _ret196 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret196
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret194, _ret195 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end429
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret194, _ret195 = _CALL (vm, meta, params)
                                                        goto _inline_end429
                                                    else
                                                        _ret194, _ret195 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end429
                                                    end
                                                end
                                                _ret194, _ret195 = right
                                                goto _inline_end429
                                            end
                                            ::_inline_end429::
                                            right, rerr = _ret194, _ret195
                                            local _ret191, _ret192
                                            do
                                                local _ret193
                                                _ret193 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret193
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret191, _ret192 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end427
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret191, _ret192 = _CALL (vm, meta, params)
                                                        goto _inline_end427
                                                    else
                                                        _ret191, _ret192 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end427
                                                    end
                                                end
                                                _ret191, _ret192 = left
                                                goto _inline_end427
                                            end
                                            ::_inline_end427::
                                            left, lerr = _ret191, _ret192
                                            if lerr or rerr then
                                                local _ret185
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret186
                                                    _ret186 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret186
                                                    local _ret187
                                                    _ret187 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret187
                                                    if tleft == "table" and left.meta and left.meta.table.addr then
                                                        meta = left.meta.table.addr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.addl then
                                                        meta = right.meta.table.addl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.add then
                                                        meta = left.meta.table.add
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.add then
                                                        meta = right.meta.table.add
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret188
                                                            _ret188 = mainStackPointer
                                                            local pos = _ret188
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret189
                                                            _ret189 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret189
                                                        end
                                                    end
                                                    _ret185 = meta
                                                    goto _inline_end405
                                                end
                                                ::_inline_end405::
                                                local meta = _ret185
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret190
                                                _ret190 = left + right
                                                goto _inline_end426
                                                ::_inline_end426::
                                                result = _ret190
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                end
                            else
                                if op < 39 then
                                    do
                                        local _ret197
                                        mainStackPointer = mainStackPointer - 1
                                        _ret197 = mainStack[mainStackPointer + 1]
                                        local right = _ret197
                                        local _ret198
                                        mainStackPointer = mainStackPointer - 1
                                        _ret198 = mainStack[mainStackPointer + 1]
                                        local left = _ret198
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret199
                                            _ret199 = leftNumber * rightNumber
                                            result = _ret199
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret209, _ret210
                                            do
                                                local _ret211
                                                _ret211 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret211
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret209, _ret210 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end461
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret209, _ret210 = _CALL (vm, meta, params)
                                                        goto _inline_end461
                                                    else
                                                        _ret209, _ret210 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end461
                                                    end
                                                end
                                                _ret209, _ret210 = right
                                                goto _inline_end461
                                            end
                                            ::_inline_end461::
                                            right, rerr = _ret209, _ret210
                                            local _ret206, _ret207
                                            do
                                                local _ret208
                                                _ret208 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret208
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret206, _ret207 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end459
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret206, _ret207 = _CALL (vm, meta, params)
                                                        goto _inline_end459
                                                    else
                                                        _ret206, _ret207 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end459
                                                    end
                                                end
                                                _ret206, _ret207 = left
                                                goto _inline_end459
                                            end
                                            ::_inline_end459::
                                            left, lerr = _ret206, _ret207
                                            if lerr or rerr then
                                                local _ret200
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret201
                                                    _ret201 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret201
                                                    local _ret202
                                                    _ret202 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret202
                                                    if tleft == "table" and left.meta and left.meta.table.mulr then
                                                        meta = left.meta.table.mulr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.mull then
                                                        meta = right.meta.table.mull
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.mul then
                                                        meta = left.meta.table.mul
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.mul then
                                                        meta = right.meta.table.mul
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret203
                                                            _ret203 = mainStackPointer
                                                            local pos = _ret203
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret204
                                                            _ret204 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret204
                                                        end
                                                    end
                                                    _ret200 = meta
                                                    goto _inline_end437
                                                end
                                                ::_inline_end437::
                                                local meta = _ret200
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret205
                                                _ret205 = left * right
                                                goto _inline_end458
                                                ::_inline_end458::
                                                result = _ret205
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                else
                                    do
                                        local _ret212
                                        mainStackPointer = mainStackPointer - 1
                                        _ret212 = mainStack[mainStackPointer + 1]
                                        local right = _ret212
                                        local _ret213
                                        mainStackPointer = mainStackPointer - 1
                                        _ret213 = mainStack[mainStackPointer + 1]
                                        local left = _ret213
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret214
                                            _ret214 = leftNumber - rightNumber
                                            result = _ret214
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret224, _ret225
                                            do
                                                local _ret226
                                                _ret226 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret226
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret224, _ret225 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end493
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret224, _ret225 = _CALL (vm, meta, params)
                                                        goto _inline_end493
                                                    else
                                                        _ret224, _ret225 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end493
                                                    end
                                                end
                                                _ret224, _ret225 = right
                                                goto _inline_end493
                                            end
                                            ::_inline_end493::
                                            right, rerr = _ret224, _ret225
                                            local _ret221, _ret222
                                            do
                                                local _ret223
                                                _ret223 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret223
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret221, _ret222 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end491
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret221, _ret222 = _CALL (vm, meta, params)
                                                        goto _inline_end491
                                                    else
                                                        _ret221, _ret222 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end491
                                                    end
                                                end
                                                _ret221, _ret222 = left
                                                goto _inline_end491
                                            end
                                            ::_inline_end491::
                                            left, lerr = _ret221, _ret222
                                            if lerr or rerr then
                                                local _ret215
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret216
                                                    _ret216 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret216
                                                    local _ret217
                                                    _ret217 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret217
                                                    if tleft == "table" and left.meta and left.meta.table.subr then
                                                        meta = left.meta.table.subr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.subl then
                                                        meta = right.meta.table.subl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.sub then
                                                        meta = left.meta.table.sub
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.sub then
                                                        meta = right.meta.table.sub
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret218
                                                            _ret218 = mainStackPointer
                                                            local pos = _ret218
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret219
                                                            _ret219 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret219
                                                        end
                                                    end
                                                    _ret215 = meta
                                                    goto _inline_end469
                                                end
                                                ::_inline_end469::
                                                local meta = _ret215
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret220
                                                _ret220 = left - right
                                                goto _inline_end490
                                                ::_inline_end490::
                                                result = _ret220
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    else
                        if op < 44 then
                            if op < 42 then
                                if op < 41 then
                                    do
                                        local _ret227
                                        mainStackPointer = mainStackPointer - 1
                                        _ret227 = mainStack[mainStackPointer + 1]
                                        local right = _ret227
                                        local _ret228
                                        mainStackPointer = mainStackPointer - 1
                                        _ret228 = mainStack[mainStackPointer + 1]
                                        local left = _ret228
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret229
                                            _ret229 = leftNumber / rightNumber
                                            result = _ret229
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret239, _ret240
                                            do
                                                local _ret241
                                                _ret241 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret241
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret239, _ret240 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end525
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret239, _ret240 = _CALL (vm, meta, params)
                                                        goto _inline_end525
                                                    else
                                                        _ret239, _ret240 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end525
                                                    end
                                                end
                                                _ret239, _ret240 = right
                                                goto _inline_end525
                                            end
                                            ::_inline_end525::
                                            right, rerr = _ret239, _ret240
                                            local _ret236, _ret237
                                            do
                                                local _ret238
                                                _ret238 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret238
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret236, _ret237 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end523
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret236, _ret237 = _CALL (vm, meta, params)
                                                        goto _inline_end523
                                                    else
                                                        _ret236, _ret237 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end523
                                                    end
                                                end
                                                _ret236, _ret237 = left
                                                goto _inline_end523
                                            end
                                            ::_inline_end523::
                                            left, lerr = _ret236, _ret237
                                            if lerr or rerr then
                                                local _ret230
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret231
                                                    _ret231 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret231
                                                    local _ret232
                                                    _ret232 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret232
                                                    if tleft == "table" and left.meta and left.meta.table.divr then
                                                        meta = left.meta.table.divr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.divl then
                                                        meta = right.meta.table.divl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.div then
                                                        meta = left.meta.table.div
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.div then
                                                        meta = right.meta.table.div
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret233
                                                            _ret233 = mainStackPointer
                                                            local pos = _ret233
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret234
                                                            _ret234 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret234
                                                        end
                                                    end
                                                    _ret230 = meta
                                                    goto _inline_end501
                                                end
                                                ::_inline_end501::
                                                local meta = _ret230
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret235
                                                _ret235 = left / right
                                                goto _inline_end522
                                                ::_inline_end522::
                                                result = _ret235
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                else
                                    do
                                        local _ret242
                                        mainStackPointer = mainStackPointer - 1
                                        _ret242 = mainStack[mainStackPointer + 1]
                                        local x = _ret242
                                        local err, meta
                                        local _ret243, _ret244
                                        do
                                            local _ret245
                                            _ret245 = type (x) == "table" and (x == empty or x.type) or (type (x) == "cdata" and x.type) or type (x)
                                            local tx = _ret245
                                            if tx == "string" then
                                                x = tonumber (x)
                                                if not x then
                                                    _ret243, _ret244 = x, "Cannot convert the string value to a number."
                                                    goto _inline_end530
                                                end
                                            elseif tx ~= "number" then
                                                if tx == "table" and x.meta.table.tonumber then
                                                    local meta = x.meta.table.tonumber
                                                    local params = {}
                                                    _ret243, _ret244 = _CALL (vm, meta, params)
                                                    goto _inline_end530
                                                else
                                                    _ret243, _ret244 = x, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                    goto _inline_end530
                                                end
                                            end
                                            _ret243, _ret244 = x
                                            goto _inline_end530
                                        end
                                        ::_inline_end530::
                                        x, err = _ret243, _ret244
                                        if err then
                                            local _ret246
                                            do
                                                local meta
                                                local _ret247
                                                _ret247 = type (x) == "table" and (x == empty or x.type) or (type (x) == "cdata" and x.type) or type (x)
                                                if _ret247 == "table" and x.meta and x.meta.table.minus then
                                                    meta = x.meta.table.minus
                                                end
                                                if meta then
                                                    mainStackFramesPointer = mainStackFramesPointer + 1
                                                    mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = paramself
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = "self"
                                                    do
                                                        local _ret248
                                                        _ret248 = mainStackPointer
                                                        local pos = _ret248
                                                        tagStack[pos] = "key"
                                                    end
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = meta
                                                    do
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = 0
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = 0
                                                        local _ret249
                                                        _ret249 = macroStackPointer
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = _ret249
                                                    end
                                                end
                                                _ret246 = meta
                                                goto _inline_end532
                                            end
                                            ::_inline_end532::
                                            meta = _ret246
                                            if not meta then
                                                vmerr = err
                                            end
                                        else
                                            local _ret250
                                            _ret250 = -x
                                            goto _inline_end549
                                            ::_inline_end549::
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = _ret250
                                        end
                                    end
                                end
                            else
                                if op < 43 then
                                    do
                                        local _ret251
                                        mainStackPointer = mainStackPointer - 1
                                        _ret251 = mainStack[mainStackPointer + 1]
                                        local right = _ret251
                                        local _ret252
                                        mainStackPointer = mainStackPointer - 1
                                        _ret252 = mainStack[mainStackPointer + 1]
                                        local left = _ret252
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret253
                                            _ret253 = leftNumber % rightNumber
                                            result = _ret253
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret263, _ret264
                                            do
                                                local _ret265
                                                _ret265 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret265
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret263, _ret264 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end581
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret263, _ret264 = _CALL (vm, meta, params)
                                                        goto _inline_end581
                                                    else
                                                        _ret263, _ret264 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end581
                                                    end
                                                end
                                                _ret263, _ret264 = right
                                                goto _inline_end581
                                            end
                                            ::_inline_end581::
                                            right, rerr = _ret263, _ret264
                                            local _ret260, _ret261
                                            do
                                                local _ret262
                                                _ret262 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret262
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret260, _ret261 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end579
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret260, _ret261 = _CALL (vm, meta, params)
                                                        goto _inline_end579
                                                    else
                                                        _ret260, _ret261 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end579
                                                    end
                                                end
                                                _ret260, _ret261 = left
                                                goto _inline_end579
                                            end
                                            ::_inline_end579::
                                            left, lerr = _ret260, _ret261
                                            if lerr or rerr then
                                                local _ret254
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret255
                                                    _ret255 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret255
                                                    local _ret256
                                                    _ret256 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret256
                                                    if tleft == "table" and left.meta and left.meta.table.modr then
                                                        meta = left.meta.table.modr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.modl then
                                                        meta = right.meta.table.modl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.mod then
                                                        meta = left.meta.table.mod
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.mod then
                                                        meta = right.meta.table.mod
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret257
                                                            _ret257 = mainStackPointer
                                                            local pos = _ret257
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret258
                                                            _ret258 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret258
                                                        end
                                                    end
                                                    _ret254 = meta
                                                    goto _inline_end557
                                                end
                                                ::_inline_end557::
                                                local meta = _ret254
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret259
                                                _ret259 = left % right
                                                goto _inline_end578
                                                ::_inline_end578::
                                                result = _ret259
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                else
                                    do
                                        local _ret266
                                        mainStackPointer = mainStackPointer - 1
                                        _ret266 = mainStack[mainStackPointer + 1]
                                        local right = _ret266
                                        local _ret267
                                        mainStackPointer = mainStackPointer - 1
                                        _ret267 = mainStack[mainStackPointer + 1]
                                        local left = _ret267
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret268
                                            _ret268 = leftNumber ^ rightNumber
                                            result = _ret268
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret278, _ret279
                                            do
                                                local _ret280
                                                _ret280 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret280
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret278, _ret279 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end613
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret278, _ret279 = _CALL (vm, meta, params)
                                                        goto _inline_end613
                                                    else
                                                        _ret278, _ret279 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end613
                                                    end
                                                end
                                                _ret278, _ret279 = right
                                                goto _inline_end613
                                            end
                                            ::_inline_end613::
                                            right, rerr = _ret278, _ret279
                                            local _ret275, _ret276
                                            do
                                                local _ret277
                                                _ret277 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret277
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret275, _ret276 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end611
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret275, _ret276 = _CALL (vm, meta, params)
                                                        goto _inline_end611
                                                    else
                                                        _ret275, _ret276 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end611
                                                    end
                                                end
                                                _ret275, _ret276 = left
                                                goto _inline_end611
                                            end
                                            ::_inline_end611::
                                            left, lerr = _ret275, _ret276
                                            if lerr or rerr then
                                                local _ret269
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret270
                                                    _ret270 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret270
                                                    local _ret271
                                                    _ret271 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret271
                                                    if tleft == "table" and left.meta and left.meta.table.powr then
                                                        meta = left.meta.table.powr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.powl then
                                                        meta = right.meta.table.powl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.pow then
                                                        meta = left.meta.table.pow
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.pow then
                                                        meta = right.meta.table.pow
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret272
                                                            _ret272 = mainStackPointer
                                                            local pos = _ret272
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret273
                                                            _ret273 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret273
                                                        end
                                                    end
                                                    _ret269 = meta
                                                    goto _inline_end589
                                                end
                                                ::_inline_end589::
                                                local meta = _ret269
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret274
                                                _ret274 = left ^ right
                                                goto _inline_end610
                                                ::_inline_end610::
                                                result = _ret274
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                end
                            end
                        else
                            if op < 46 then
                                if op < 45 then
                                    do
                                        local _ret281
                                        mainStackPointer = mainStackPointer - 1
                                        _ret281 = mainStack[mainStackPointer + 1]
                                        local right = _ret281
                                        local _ret282
                                        mainStackPointer = mainStackPointer - 1
                                        _ret282 = mainStack[mainStackPointer + 1]
                                        local left = _ret282
                                        local rightNumber = tonumber (right)
                                        local leftNumber = tonumber (left)
                                        if rightNumber and leftNumber then
                                            local _ret283
                                            _ret283 = leftNumber < rightNumber
                                            result = _ret283
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        else
                                            local rerr, lerr
                                            local _ret293, _ret294
                                            do
                                                local _ret295
                                                _ret295 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                local tx = _ret295
                                                if tx == "string" then
                                                    right = tonumber (right)
                                                    if not right then
                                                        _ret293, _ret294 = right, "Cannot convert the string value to a number."
                                                        goto _inline_end645
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and right.meta.table.tonumber then
                                                        local meta = right.meta.table.tonumber
                                                        local params = {}
                                                        _ret293, _ret294 = _CALL (vm, meta, params)
                                                        goto _inline_end645
                                                    else
                                                        _ret293, _ret294 = right, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end645
                                                    end
                                                end
                                                _ret293, _ret294 = right
                                                goto _inline_end645
                                            end
                                            ::_inline_end645::
                                            right, rerr = _ret293, _ret294
                                            local _ret290, _ret291
                                            do
                                                local _ret292
                                                _ret292 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                local tx = _ret292
                                                if tx == "string" then
                                                    left = tonumber (left)
                                                    if not left then
                                                        _ret290, _ret291 = left, "Cannot convert the string value to a number."
                                                        goto _inline_end643
                                                    end
                                                elseif tx ~= "number" then
                                                    if tx == "table" and left.meta.table.tonumber then
                                                        local meta = left.meta.table.tonumber
                                                        local params = {}
                                                        _ret290, _ret291 = _CALL (vm, meta, params)
                                                        goto _inline_end643
                                                    else
                                                        _ret290, _ret291 = left, "Cannot do comparison or arithmetic with " .. tostring (tx) .. " value."
                                                        goto _inline_end643
                                                    end
                                                end
                                                _ret290, _ret291 = left
                                                goto _inline_end643
                                            end
                                            ::_inline_end643::
                                            left, lerr = _ret290, _ret291
                                            if lerr or rerr then
                                                local _ret284
                                                do
                                                    local meta, param1, param2, paramself
                                                    local _ret285
                                                    _ret285 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                                    local tleft = _ret285
                                                    local _ret286
                                                    _ret286 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                                    local tright = _ret286
                                                    if tleft == "table" and left.meta and left.meta.table.ltr then
                                                        meta = left.meta.table.ltr
                                                        param1 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.ltl then
                                                        meta = right.meta.table.ltl
                                                        param1 = left
                                                        paramself = right
                                                    elseif tleft == "table" and left.meta and left.meta.table.lt then
                                                        meta = left.meta.table.lt
                                                        param1 = left
                                                        param2 = right
                                                        paramself = left
                                                    elseif tright == "table" and right.meta and right.meta.table.lt then
                                                        meta = right.meta.table.lt
                                                        param1 = left
                                                        param2 = right
                                                        paramself = right
                                                    end
                                                    if meta then
                                                        mainStackFramesPointer = mainStackFramesPointer + 1
                                                        mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = param1
                                                        if param2 then
                                                            mainStackPointer = mainStackPointer + 1
                                                            mainStack[mainStackPointer] = param2
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = paramself
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = "self"
                                                        do
                                                            local _ret287
                                                            _ret287 = mainStackPointer
                                                            local pos = _ret287
                                                            tagStack[pos] = "key"
                                                        end
                                                        mainStackPointer = mainStackPointer + 1
                                                        mainStack[mainStackPointer] = meta
                                                        do
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = 0
                                                            local _ret288
                                                            _ret288 = macroStackPointer
                                                            injectionStackPointer = injectionStackPointer + 1
                                                            injectionStack[injectionStackPointer] = _ret288
                                                        end
                                                    end
                                                    _ret284 = meta
                                                    goto _inline_end621
                                                end
                                                ::_inline_end621::
                                                local meta = _ret284
                                                if not meta then
                                                    vmerr = lerr or rerr
                                                end
                                            else
                                                local _ret289
                                                _ret289 = left < right
                                                goto _inline_end642
                                                ::_inline_end642::
                                                result = _ret289
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result
                                            end
                                        end
                                    end
                                else
                                    do
                                        local _ret296
                                        mainStackPointer = mainStackPointer - 1
                                        _ret296 = mainStack[mainStackPointer + 1]
                                        local right = _ret296
                                        local _ret297
                                        mainStackPointer = mainStackPointer - 1
                                        _ret297 = mainStack[mainStackPointer + 1]
                                        local left = _ret297
                                        local _ret298
                                        do
                                            local meta, param1, param2, paramself
                                            local _ret299
                                            _ret299 = type (left) == "table" and (left == empty or left.type) or (type (left) == "cdata" and left.type) or type (left)
                                            local tleft = _ret299
                                            local _ret300
                                            _ret300 = type (right) == "table" and (right == empty or right.type) or (type (right) == "cdata" and right.type) or type (right)
                                            local tright = _ret300
                                            if tleft == "table" and left.meta and left.meta.table.eqr then
                                                meta = left.meta.table.eqr
                                                param1 = right
                                                paramself = left
                                            elseif tright == "table" and right.meta and right.meta.table.eql then
                                                meta = right.meta.table.eql
                                                param1 = left
                                                paramself = right
                                            elseif tleft == "table" and left.meta and left.meta.table.eq then
                                                meta = left.meta.table.eq
                                                param1 = left
                                                param2 = right
                                                paramself = left
                                            elseif tright == "table" and right.meta and right.meta.table.eq then
                                                meta = right.meta.table.eq
                                                param1 = left
                                                param2 = right
                                                paramself = right
                                            end
                                            if meta then
                                                mainStackFramesPointer = mainStackFramesPointer + 1
                                                mainStackFrames[mainStackFramesPointer] = mainStackPointer + 1
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = param1
                                                if param2 then
                                                    mainStackPointer = mainStackPointer + 1
                                                    mainStack[mainStackPointer] = param2
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = paramself
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = "self"
                                                do
                                                    local _ret301
                                                    _ret301 = mainStackPointer
                                                    local pos = _ret301
                                                    tagStack[pos] = "key"
                                                end
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = meta
                                                do
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = plume.ops.CONCAT_CALL
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = 0
                                                    local _ret302
                                                    _ret302 = macroStackPointer
                                                    injectionStackPointer = injectionStackPointer + 1
                                                    injectionStack[injectionStackPointer] = _ret302
                                                end
                                            end
                                            _ret298 = meta
                                            goto _inline_end650
                                        end
                                        ::_inline_end650::
                                        local meta = _ret298
                                        if not meta then
                                            local result = left == right or tonumber (left) and tonumber (left) == tonumber (right) or (false)
                                            mainStackPointer = mainStackPointer + 1
                                            mainStack[mainStackPointer] = result
                                        end
                                    end
                                end
                            else
                                if op < 47 then
                                    do
                                        local _ret303
                                        mainStackPointer = mainStackPointer - 1
                                        _ret303 = mainStack[mainStackPointer + 1]
                                        local right = _ret303
                                        local _ret304
                                        mainStackPointer = mainStackPointer - 1
                                        _ret304 = mainStack[mainStackPointer + 1]
                                        local left = _ret304
                                        local _ret305
                                        if right == empty then
                                            _ret305 = false
                                            goto _inline_end674
                                        end
                                        _ret305 = right
                                        ::_inline_end674::
                                        right = _ret305
                                        local _ret306
                                        if left == empty then
                                            _ret306 = false
                                            goto _inline_end675
                                        end
                                        _ret306 = left
                                        ::_inline_end675::
                                        left = _ret306
                                        local _ret307
                                        _ret307 = right and left
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret307
                                    end
                                else
                                    do
                                        local _ret308
                                        mainStackPointer = mainStackPointer - 1
                                        _ret308 = mainStack[mainStackPointer + 1]
                                        local x = _ret308
                                        local _ret309
                                        if x == empty then
                                            _ret309 = false
                                            goto _inline_end681
                                        end
                                        _ret309 = x
                                        ::_inline_end681::
                                        x = _ret309
                                        local _ret310
                                        _ret310 = not x
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret310
                                    end
                                end
                            end
                        end
                    end
                else
                    if op < 56 then
                        if op < 52 then
                            if op < 50 then
                                if op < 49 then
                                    do
                                        local _ret311
                                        mainStackPointer = mainStackPointer - 1
                                        _ret311 = mainStack[mainStackPointer + 1]
                                        local right = _ret311
                                        local _ret312
                                        mainStackPointer = mainStackPointer - 1
                                        _ret312 = mainStack[mainStackPointer + 1]
                                        local left = _ret312
                                        local _ret313
                                        if right == empty then
                                            _ret313 = false
                                            goto _inline_end688
                                        end
                                        _ret313 = right
                                        ::_inline_end688::
                                        right = _ret313
                                        local _ret314
                                        if left == empty then
                                            _ret314 = false
                                            goto _inline_end689
                                        end
                                        _ret314 = left
                                        ::_inline_end689::
                                        left = _ret314
                                        local _ret315
                                        _ret315 = right or left
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret315
                                    end
                                else
                                    do
                                        local _ret316
                                        _ret316 = mainStack[mainStackPointer]
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret316
                                    end
                                end
                            else
                                if op < 51 then
                                    do
                                        local _ret317
                                        mainStackPointer = mainStackPointer - 1
                                        _ret317 = mainStack[mainStackPointer + 1]
                                        local x = _ret317
                                        local _ret318
                                        mainStackPointer = mainStackPointer - 1
                                        _ret318 = mainStack[mainStackPointer + 1]
                                        local y = _ret318
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = x
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = y
                                    end
                                else
                                    do
                                        do
                                            local _ret319
                                            variableStackFramesPointer = variableStackFramesPointer - 1
                                            _ret319 = variableStackFrames[variableStackFramesPointer + 1]
                                            variableStackPointer = _ret319 - 1
                                        end
                                        table.remove (runtime.callstack)
                                        local _ret320
                                        macroStackPointer = macroStackPointer - 1
                                        _ret320 = macroStack[macroStackPointer + 1]
                                        jump = _ret320
                                    end
                                end
                            end
                        else
                            if op < 54 then
                                if op < 53 then
                                    do
                                        do
                                            local _ret321
                                            variableStackFramesPointer = variableStackFramesPointer - 1
                                            _ret321 = variableStackFrames[variableStackFramesPointer + 1]
                                            variableStackPointer = _ret321 - 1
                                        end
                                        local _ret322
                                        fileStackPointer = fileStackPointer - 1
                                        _ret322 = fileStack[fileStackPointer + 1]
                                        local _ret324
                                        _ret324 = fileStackPointer
                                        if _ret324 == 0 then
                                            do
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = plume.ops.END
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = 0
                                                local _ret323
                                                _ret323 = macroStackPointer
                                                injectionStackPointer = injectionStackPointer + 1
                                                injectionStack[injectionStackPointer] = _ret323
                                            end
                                        else
                                            local _ret325
                                            macroStackPointer = macroStackPointer - 1
                                            _ret325 = macroStack[macroStackPointer + 1]
                                            goto _inline_end720
                                            ::_inline_end720::
                                            jump = _ret325
                                        end
                                    end
                                else
                                    goto END
                                end
                            else
                                if op < 55 then
                                    do
                                        local _ret326
                                        mainStackPointer = mainStackPointer - 1
                                        _ret326 = mainStack[mainStackPointer + 1]
                                        local t = _ret326.table[1]
                                        local tt = type (t)
                                        local result
                                        if tt == "table" then
                                            result = #t.table
                                        elseif tt == "string" then
                                            result = #t
                                        else
                                            vmerr = plume.error.hasNoLen (tt)
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = result
                                    end
                                else
                                    do
                                        local _ret327
                                        mainStackPointer = mainStackPointer - 1
                                        _ret327 = mainStack[mainStackPointer + 1]
                                        local t = _ret327.table[1]
                                        local _ret328
                                        _ret328 = type (t) == "table" and (t == empty or t.type) or (type (t) == "cdata" and t.type) or type (t)
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = _ret328
                                    end
                                end
                            end
                        end
                    else
                        if op < 60 then
                            if op < 58 then
                                if op < 57 then
                                    do
                                        local _ret329
                                        mainStackPointer = mainStackPointer - 1
                                        _ret329 = mainStack[mainStackPointer + 1]
                                        local args = _ret329.table
                                        local start = args[1]
                                        local stop = args[2]
                                        local step = args[3] or 1
                                        if not stop then
                                            stop = start
                                            start = 1
                                        end
                                        start = tonumber (start)
                                        stop = tonumber (stop)
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = {type = "stdIterator", start = start - step, stop = stop, step = step, flag = ITER_SEQ}
                                    end
                                else
                                    do
                                        local _ret330
                                        mainStackPointer = mainStackPointer - 1
                                        _ret330 = mainStack[mainStackPointer + 1]
                                        local args = _ret330.table
                                        if args.legacy then
                                            plume.warning.deprecated ("1.0", "`?legacy` flag for macro items", "Instead of \n```\nfor x in enumerate(t, ?legacy)\n\tx.key -> x.value\nend\n```\ndo\n```\nfor key, value in enumerate(t)\n\tkey -> value\nend\n```", runtime, ip, 230)
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = {type = "stdIterator", ref = args[1], flag = ITER_ITEMS, named = args.named, legacy = args.legacy}
                                    end
                                end
                            else
                                if op < 59 then
                                    do
                                        local _ret331
                                        mainStackPointer = mainStackPointer - 1
                                        _ret331 = mainStack[mainStackPointer + 1]
                                        local args = _ret331.table
                                        if args.legacy then
                                            plume.warning.deprecated ("1.0", "`?legacy` flag for macro enumerate", "Instead of \n```\nfor x in enumerate(t, ?legacy)\n\tx.index -> x.value\nend\n```\ndo\n```\nfor index, value in enumerate(t)\n\tindex -> value\nend\n```", runtime, ip, 230)
                                        end
                                        mainStackPointer = mainStackPointer + 1
                                        mainStack[mainStackPointer] = {type = "stdIterator", ref = args[1], flag = ITER_ENUMS, legacy = args.legacy}
                                    end
                                else
                                    do
                                        local _ret332
                                        mainStackPointer = mainStackPointer - 1
                                        _ret332 = mainStack[mainStackPointer + 1]
                                        local args = _ret332
                                        local firstFilename = runtime.files[1].name
                                        local lastFilename = runtime.files[fileStack[fileStackPointer]].name
                                        local filename, searchPaths = plume.getFilenameFromPath (args.table[1], args.table.lua, runtime, firstFilename, lastFilename)
                                        if filename then
                                            if args.table.lua then
                                                local result = dofile (filename)
                                                 (plume)
                                                mainStackPointer = mainStackPointer + 1
                                                mainStack[mainStackPointer] = result or empty
                                            else
                                                local success = true
                                                local err
                                                local chunk = runtime.files[filename]
                                                if not chunk then
                                                    chunk = plume.obj.macro (filename, runtime)
                                                    local f = io.open (filename)
                                                    local code = f:read ("*a")
                                                    f:close ()
                                                    success, err = pcall (plume.compileFile, code, filename, chunk, runtime)
                                                    runtime.files[filename] = chunk
                                                end
                                                if success then
                                                    for _, key in ipairs (args.keys)
                                                     do
                                                        local offset = chunk.namedParamOffset[key]
                                                        if offset then
                                                            chunk.static[offset] = args.table[key]
                                                        end
                                                    end
                                                    fileStackPointer = fileStackPointer + 1
                                                    fileStack[fileStackPointer] = chunk.fileID
                                                    macroStackPointer = macroStackPointer + 1
                                                    macroStack[macroStackPointer] = ip + 1
                                                    do
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = plume.ops.JUMP
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = 0
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = chunk.offset
                                                        local _ret333
                                                        _ret333 = macroStackPointer
                                                        injectionStackPointer = injectionStackPointer + 1
                                                        injectionStack[injectionStackPointer] = _ret333
                                                    end
                                                else
                                                    vmerr = err
                                                end
                                            end
                                        else
                                            vmerr = plume.error.cannotOpenFile (args[1], searchPaths)
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
            goto DISPATCH
        ::END::
        local _ret334
        _ret334 = mainStack[mainStackPointer]
        return true, _ret334
    end
end
